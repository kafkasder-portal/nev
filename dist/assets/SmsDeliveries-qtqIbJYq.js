import{j as e}from"./query-D2a9LsAW.js";import{r as d}from"./vendor-Ba6jih-_.js";import{D as G}from"./DataTable-Dzg2kqPW.js";import{M as y}from"./Modal-BazkrsRl.js";import{n as S,aa as R,S as P,F as _,y as V,c as k,av as w,d as E,a6 as M,at as K,ak as H,w as Z,ao as U}from"./ui-yrixFDMZ.js";function W(){const[x,D]=d.useState(""),[g,C]=d.useState("all"),[p,A]=d.useState("all"),[u,T]=d.useState("all"),[a,z]=d.useState(null),[B,j]=d.useState(!1),[F,v]=d.useState(!1),[c]=d.useState([{id:"SMS001",recipient:"Ahmet Yılmaz",phone:"+90 532 123 4567",content:"Merhaba Ahmet, randevunuz yarın saat 14:00'da. Lütfen zamanında gelin.",status:"delivered",sentAt:"2024-01-15 10:30:00",deliveredAt:"2024-01-15 10:30:15",cost:.05,messageLength:65,parts:1,provider:"Turkcell",campaignId:"CAMP001",campaignName:"Randevu Hatırlatma"},{id:"SMS002",recipient:"Fatma Demir",phone:"+90 533 987 6543",content:"Sayın Fatma, ödemenizin son tarihi yaklaşıyor. Lütfen en kısa sürede ödeme yapın.",status:"sent",sentAt:"2024-01-15 11:15:00",cost:.05,messageLength:78,parts:1,provider:"Vodafone",campaignId:"CAMP002",campaignName:"Ödeme Hatırlatma"},{id:"SMS003",recipient:"Mehmet Kaya",phone:"+90 534 555 1234",content:"Acil: Sistem bakımı nedeniyle hizmetlerimiz geçici olarak durdurulmuştur. Detaylar için web sitemizi ziyaret edin.",status:"failed",sentAt:"2024-01-15 12:00:00",failureReason:"Geçersiz numara",cost:0,messageLength:115,parts:1,provider:"Turk Telekom",campaignId:"CAMP003",campaignName:"Acil Bilgilendirme"},{id:"SMS004",recipient:"Ayşe Özkan",phone:"+90 535 777 8888",content:"Hoş geldiniz! Üyeliğiniz başarıyla oluşturuldu. Kullanıcı adınız: ayse.ozkan, şifrenizi e-posta adresinize gönderdik.",status:"delivered",sentAt:"2024-01-15 13:45:00",deliveredAt:"2024-01-15 13:45:08",cost:.08,messageLength:125,parts:2,provider:"Turkcell",campaignId:"CAMP004",campaignName:"Hoş Geldin Mesajı"},{id:"SMS005",recipient:"Ali Veli",phone:"+90 536 999 0000",content:"Promosyon: %50 indirim fırsatı! Bugün sınırlı süre için tüm ürünlerde geçerli. Kod: INDIRIM50",status:"pending",sentAt:"2024-01-15 14:20:00",cost:.05,messageLength:95,parts:1,provider:"Vodafone",campaignId:"CAMP005",campaignName:"Promosyon Kampanyası"}]),N=["Turkcell","Vodafone","Turk Telekom"],L=d.useMemo(()=>c.filter(s=>{const t=s.recipient.toLowerCase().includes(x.toLowerCase())||s.phone.includes(x)||s.content.toLowerCase().includes(x.toLowerCase())||s.id.toLowerCase().includes(x.toLowerCase()),o=g==="all"||s.status===g,h=p==="all"||s.provider===p;let i=!0;if(u!=="all"){const m=new Date,n=new Date(s.sentAt);switch(u){case"today":{i=n.toDateString()===m.toDateString();break}case"yesterday":{const r=new Date(m);r.setDate(r.getDate()-1),i=n.toDateString()===r.toDateString();break}case"week":{const r=new Date(m);r.setDate(r.getDate()-7),i=n>=r;break}case"month":{const r=new Date(m);r.setMonth(r.getMonth()-1),i=n>=r;break}}}return t&&o&&h&&i}),[x,g,p,u,c]),I=s=>{z(s),j(!0)},b=s=>{switch(s){case"sent":return e.jsx(Z,{className:"h-4 w-4 text-blue-500"});case"delivered":return e.jsx(k,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(w,{className:"h-4 w-4 text-red-500"});case"pending":return e.jsx(H,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(K,{className:"h-4 w-4 text-gray-500"})}},f=s=>{const t={sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"},o={sent:"Gönderildi",delivered:"Teslim Edildi",failed:"Başarısız",pending:"Beklemede"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[s]}`,children:o[s]})},l=(()=>{const s=c.length,t=c.filter(n=>n.status==="delivered").length,o=c.filter(n=>n.status==="failed").length,h=c.filter(n=>n.status==="pending").length,i=c.reduce((n,r)=>n+r.cost,0),m=s>0?(t/s*100).toFixed(1):"0";return{total:s,delivered:t,failed:o,pending:h,totalCost:i,deliveryRate:m}})(),O=[{key:"id",header:"SMS ID",render:(s,t)=>e.jsx("span",{className:"font-mono text-sm text-gray-600",children:t.id})},{key:"recipient",header:"Alıcı",render:(s,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.recipient}),e.jsx("div",{className:"text-xs text-gray-500",children:t.phone})]})},{key:"content",header:"İçerik",render:(s,t)=>e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"text-sm truncate",title:t.content,children:t.content}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.messageLength," karakter, ",t.parts," parça"]})]})},{key:"status",header:"Durum",render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[b(t.status),f(t.status)]})},{key:"provider",header:"Operatör",render:(s,t)=>e.jsx("span",{className:"text-sm",children:t.provider})},{key:"sentAt",header:"Gönderim Zamanı",render:(s,t)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:t.sentAt.split(" ")[0]}),e.jsx("div",{className:"text-gray-500",children:t.sentAt.split(" ")[1]})]})},{key:"cost",header:"Maliyet",render:(s,t)=>e.jsxs("span",{className:"font-medium text-sm",children:["₺",t.cost.toFixed(2)]})},{key:"actions",header:"İşlemler",render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>I(t),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Detayları Görüntüle",children:e.jsx(U,{className:"h-4 w-4"})}),t.status==="failed"&&e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Tekrar Gönder",children:e.jsx(M,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SMS Gönderimleri"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"SMS gönderim geçmişini ve durumlarını takip edin"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(S,{className:"h-4 w-4"}),"İstatistikler"]}),e.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(R,{className:"h-4 w-4"}),"Rapor Al"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-gray-400"}),e.jsx("input",{value:x,onChange:s=>D(s.target.value),className:"flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"SMS ID, alıcı, telefon veya içerik ara..."})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtreler:"})]}),e.jsxs("select",{value:g,onChange:s=>C(s.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"delivered",children:"Teslim Edildi"}),e.jsx("option",{value:"sent",children:"Gönderildi"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"failed",children:"Başarısız"})]}),e.jsxs("select",{value:p,onChange:s=>A(s.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Tüm Operatörler"}),N.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:u,onChange:s=>T(s.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Tüm Tarihler"}),e.jsx("option",{value:"today",children:"Bugün"}),e.jsx("option",{value:"yesterday",children:"Dün"}),e.jsx("option",{value:"week",children:"Son 7 Gün"}),e.jsx("option",{value:"month",children:"Son 30 Gün"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Toplam SMS"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Teslim Edildi"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.delivered})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Başarısız"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.failed})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Başarı Oranı"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["%",l.deliveryRate]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Maliyet"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₺",l.totalCost.toFixed(2)]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border",children:e.jsx(G,{columns:O,data:L})}),e.jsx(y,{isOpen:B,onClose:()=>j(!1),title:"SMS Detayları",children:a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMS ID"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:a.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),e.jsxs("div",{className:"flex items-center gap-2",children:[b(a.status),f(a.status)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alıcı"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.recipient})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operatör"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.provider})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maliyet"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["₺",a.cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gönderim Zamanı"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.sentAt})]}),a.deliveredAt&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teslim Zamanı"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.deliveredAt})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesaj Uzunluğu"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[a.messageLength," karakter (",a.parts," parça)"]})]}),a.campaignName&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kampanya"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.campaignName})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mesaj İçeriği"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:a.content})})]}),a.failureReason&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hata Nedeni"}),e.jsx("div",{className:"bg-red-50 p-3 rounded border border-red-200",children:e.jsx("p",{className:"text-sm text-red-800",children:a.failureReason})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.status==="failed"&&e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(M,{className:"h-4 w-4"}),"Tekrar Gönder"]}),e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Kapat"})]})]})}),e.jsx(y,{isOpen:F,onClose:()=>v(!1),title:"SMS İstatistikleri",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Genel İstatistikler"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.total}),e.jsx("div",{className:"text-sm text-blue-800",children:"Toplam SMS"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.delivered}),e.jsx("div",{className:"text-sm text-green-800",children:"Başarılı"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.failed}),e.jsx("div",{className:"text-sm text-red-800",children:"Başarısız"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["%",l.deliveryRate]}),e.jsx("div",{className:"text-sm text-purple-800",children:"Başarı Oranı"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Operatör Bazında Dağılım"}),e.jsx("div",{className:"space-y-3",children:N.map(s=>{const t=c.filter(i=>i.provider===s),o=t.filter(i=>i.status==="delivered").length,h=t.length>0?(o/t.length*100).toFixed(1):"0";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.length," SMS"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["%",h]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]})]},s)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Maliyet Analizi"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",l.totalCost.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Maliyet"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",(l.totalCost/Math.max(l.total,1)).toFixed(3)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"SMS Başına Ortalama"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",(l.totalCost/Math.max(l.delivered,1)).toFixed(3)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı SMS Başına"})]})]})})]})]})})]})}export{W as default};
