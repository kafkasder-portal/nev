import{j as e}from"./query-D2a9LsAW.js";import{r as d}from"./vendor-Ba6jih-_.js";import{C as p,B as u,u as xe,n as A,o as z}from"./index-DdeQrtE8.js";import{u as ge,t as pe,o as ye,n as je,s as K,e as fe}from"./types-Vcb-PP2J.js";import{u as k,X as le,j as U,a$ as Z,d as ce,b0 as we,ak as Q,aH as ve,au as Ne,aw as be,ax as me,a as _e,M as re,ae as ne,A as ie,aO as oe,b1 as ke,c as L,ab as q,w as Se,aa as Te,Z as de,aN as De,S as Ce,F as Ge,ao as Ae,aI as ze}from"./ui-yrixFDMZ.js";import{V as f}from"./index-v3sBR1NV.js";import"./router-PzPojOO1.js";import"./supabase-B5p9Wfie.js";const x=(t,s)=>{console.error(`${s}:`,t);const a=(t==null?void 0:t.message)||`Error in ${s}`;throw k.error(a),new Error(a)},I=()=>[{id:"task_1",title:"Yıllık Bütçe Raporu Hazırlama",description:"Dernek 2024 yılı bütçe raporunu hazırlamak ve sunuma uygun hale getirmek",assigned_to:"user2",assigned_by:"user1",due_date:new Date(Date.now()+7*24*60*60*1e3).toISOString(),priority:"high",status:"in_progress",category:"Finans",estimated_hours:20,actual_hours:12,created_at:new Date(Date.now()-5*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{id:"task_2",title:"Yeni Proje Önerisi Değerlendirmesi",description:"Gelen proje önerilerini teknik ve bütçe açısından değerlendirme",assigned_to:"user3",assigned_by:"user1",due_date:new Date(Date.now()+3*24*60*60*1e3).toISOString(),priority:"medium",status:"pending",category:"Proje Yönetimi",estimated_hours:8,created_at:new Date(Date.now()-3*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-24*60*60*1e3).toISOString()},{id:"task_3",title:"Web Sitesi Güncelleme",description:"Dernek web sitesindeki güncel olmayan bilgileri güncelleme",assigned_to:"user1",assigned_by:"user2",due_date:new Date(Date.now()+14*24*60*60*1e3).toISOString(),priority:"low",status:"pending",category:"İletişim",estimated_hours:4,created_at:new Date(Date.now()-2*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-2*24*60*60*1e3).toISOString()},{id:"task_4",title:"Toplantı Salonu Rezervasyonu",description:"Gelecek ay yapılacak genel kurul için toplantı salonu rezerve etme",assigned_to:"user2",assigned_by:"user3",due_date:new Date(Date.now()-2*24*60*60*1e3).toISOString(),priority:"urgent",status:"overdue",category:"Organizasyon",estimated_hours:2,actual_hours:1,created_at:new Date(Date.now()-10*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-3*24*60*60*1e3).toISOString()},{id:"task_5",title:"Bağışçı Teşekkür Mektupları",description:"Bu ay bağış yapan tüm kişilere teşekkür mektupları hazırlayıp gönderme",assigned_to:"user3",assigned_by:"user1",priority:"medium",status:"completed",category:"İletişim",estimated_hours:6,actual_hours:5,completion_notes:"Tüm mektuplar hazırlandı ve gönderildi. Pozitif geri dönüşler alındı.",completed_at:new Date(Date.now()-1*24*60*60*1e3).toISOString(),created_at:new Date(Date.now()-7*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-1*24*60*60*1e3).toISOString()}],ue=t=>[{id:"comment_1",task_id:t,user_id:"user1",content:"Bu görev için ek kaynaklara ihtiyacımız olabilir. Finans ekibiyle görüştüm.",created_at:new Date(Date.now()-2*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{id:"comment_2",task_id:t,user_id:"user2",content:"Öncelikli verilerimi topladım. Yakında raporlamaya başlayacağım.",created_at:new Date(Date.now()-1*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-1*60*60*1e3).toISOString()},{id:"comment_3",task_id:t,user_id:"user3",content:"Harika! Herhangi bir desteğe ihtiyaç duyarsan bana ulaşabilirsin.",created_at:new Date(Date.now()-30*60*1e3).toISOString(),updated_at:new Date(Date.now()-30*60*1e3).toISOString()}],Oe=t=>[{id:"attachment_1",task_id:t,file_name:"budget_template.xlsx",file_url:"https://example.com/budget_template.xlsx",file_size:156780,uploaded_by:"user1",uploaded_at:new Date(Date.now()-3*24*60*60*1e3).toISOString()},{id:"attachment_2",task_id:t,file_name:"requirements.pdf",file_url:"https://example.com/requirements.pdf",file_size:245890,uploaded_by:"user2",uploaded_at:new Date(Date.now()-1*24*60*60*1e3).toISOString()}],Me=t=>[{id:"activity_1",task_id:t,user_id:"user1",activity_type:"created",description:"Görev oluşturuldu",created_at:new Date(Date.now()-5*24*60*60*1e3).toISOString()},{id:"activity_2",task_id:t,user_id:"user1",activity_type:"assigned",old_value:"",new_value:"user2",description:"Görev kullanıcıya atandı",created_at:new Date(Date.now()-5*24*60*60*1e3).toISOString()},{id:"activity_3",task_id:t,user_id:"user2",activity_type:"status_changed",old_value:"pending",new_value:"in_progress",description:'Durum "Bekliyor" den "Devam Ediyor" ya değiştirildi',created_at:new Date(Date.now()-3*24*60*60*1e3).toISOString()},{id:"activity_4",task_id:t,user_id:"user3",activity_type:"commented",description:"Göreve yorum ekledi",created_at:new Date(Date.now()-1*24*60*60*1e3).toISOString()}],h={async getTasks(){try{return I()}catch(t){return x(t,"getTasks"),[]}},async getTask(t){try{return I().find(a=>a.id===t)||null}catch(s){return x(s,"getTask"),null}},async createTask(t){try{const s={id:`task_${Date.now()}`,title:t.title,description:t.description,assigned_to:t.assigned_to,assigned_by:"current_user",due_date:t.due_date,priority:t.priority,status:"pending",category:t.category,estimated_hours:t.estimated_hours,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await this.createActivity(s.id,"created","Görev oluşturuldu"),await this.createActivity(s.id,"assigned","Görev atandı","",t.assigned_to),await this.createNotification(t.assigned_to,s.id,"assignment","Yeni Görev",`"${s.title}" görevi size atandı.`),k.success("Görev başarıyla oluşturuldu"),s}catch(s){throw x(s,"createTask"),s}},async updateTask(t,s){try{const l=I().find(i=>i.id===t);if(!l)throw new Error("Görev bulunamadı");const o={...l,...s,updated_at:new Date().toISOString(),...s.status==="completed"&&!l.completed_at?{completed_at:new Date().toISOString()}:{}};return s.status&&s.status!==l.status&&(await this.createActivity(t,"status_changed",`Durum "${this.getStatusText(l.status)}" den "${this.getStatusText(s.status)}" ya değiştirildi`,l.status,s.status),s.status==="completed"&&await this.createNotification(l.assigned_by,t,"completion","Görev Tamamlandı",`"${l.title}" görevi tamamlandı.`)),k.success("Görev başarıyla güncellendi"),o}catch(a){throw x(a,"updateTask"),a}},async deleteTask(t){try{k.success("Görev başarıyla silindi")}catch(s){throw x(s,"deleteTask"),s}},async assignTask(t,s){try{const a=await this.getTask(t);if(!a)throw new Error("Görev bulunamadı");await this.updateTask(t,{assigned_to:s}),await this.createActivity(t,"assigned","Görev yeniden atandı",a.assigned_to,s),await this.createNotification(s,t,"assignment","Görev Atandı",`"${a.title}" görevi size atandı.`)}catch(a){throw x(a,"assignTask"),a}},async getTaskComments(t){try{return ue(t)}catch(s){return x(s,"getTaskComments"),[]}},async addTaskComment(t,s){try{const a={id:`comment_${Date.now()}`,task_id:t,user_id:"current_user",content:s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await this.createActivity(t,"commented","Göreve yorum eklendi");const l=await this.getTask(t);return l&&await this.createNotification(l.assigned_to,t,"comment","Yeni Yorum",`"${l.title}" görevine yeni yorum eklendi.`),k.success("Yorum eklendi"),a}catch(a){throw x(a,"addTaskComment"),a}},async updateTaskComment(t,s){try{const l=ue("task_1").find(i=>i.id===t);if(!l)throw new Error("Yorum bulunamadı");const o={...l,content:s,updated_at:new Date().toISOString()};return k.success("Yorum güncellendi"),o}catch(a){throw x(a,"updateTaskComment"),a}},async deleteTaskComment(t){try{k.success("Yorum silindi")}catch(s){throw x(s,"deleteTaskComment"),s}},async getTaskAttachments(t){try{return Oe(t)}catch(s){return x(s,"getTaskAttachments"),[]}},async uploadTaskAttachment(t,s){try{const l=["image/jpeg","image/png","image/gif","image/webp","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];if(s.size>10485760)throw new Error("Dosya boyutu 10MB'den küçük olmalıdır");if(!l.includes(s.type))throw new Error("Desteklenmeyen dosya türü");const o=s.name.split(".").pop(),i=`${Date.now()}_${Math.random().toString(36).substring(2)}.${o}`,w={id:`attachment_${Date.now()}`,task_id:t,file_name:s.name,file_url:`https://example.com/${i}`,file_size:s.size,uploaded_by:"current_user",uploaded_at:new Date().toISOString()};return k.success("Dosya yüklendi"),w}catch(a){throw x(a,"uploadTaskAttachment"),a}},async deleteTaskAttachment(t){try{k.success("Dosya silindi")}catch(s){throw x(s,"deleteTaskAttachment"),s}},async getTaskActivities(t){try{return Me(t)}catch(s){return x(s,"getTaskActivities"),[]}},async createActivity(t,s,a,l,o){try{return{id:`activity_${Date.now()}`,task_id:t,user_id:"current_user",activity_type:s,old_value:l,new_value:o,description:a,created_at:new Date().toISOString()}}catch(i){throw console.error("Failed to create activity:",i),i}},async getTaskNotifications(t){try{return[{id:"notif_1",task_id:"task_1",user_id:t,type:"assignment",title:"Yeni Görev Atandı",message:'"Yıllık Bütçe Raporu Hazırlama" görevi size atandı.',is_read:!1,created_at:new Date(Date.now()-72e5).toISOString()},{id:"notif_2",task_id:"task_2",user_id:t,type:"due_reminder",title:"Görev Süresi Yaklaşıyor",message:'"Yeni Proje Önerisi Değerlendirmesi" görevinin süresi yaklaşıyor.',is_read:!1,created_at:new Date(Date.now()-36e5).toISOString()}]}catch(s){return x(s,"getTaskNotifications"),[]}},async createNotification(t,s,a,l,o){try{return{id:`notif_${Date.now()}`,task_id:s,user_id:t,type:a,title:l,message:o,is_read:!1,created_at:new Date().toISOString()}}catch(i){throw console.error("Failed to create notification:",i),i}},async markNotificationAsRead(t){},async getTaskStats(){try{const t=I();return{total:t.length,pending:t.filter(a=>a.status==="pending").length,in_progress:t.filter(a=>a.status==="in_progress").length,completed:t.filter(a=>a.status==="completed").length,overdue:t.filter(a=>a.status==="overdue").length,completion_rate:t.length>0?t.filter(a=>a.status==="completed").length/t.length*100:0}}catch(t){return x(t,"getTaskStats"),{total:0,pending:0,in_progress:0,completed:0,overdue:0,completion_rate:0}}},async searchTasks(t,s){try{let a=I();return t&&(a=a.filter(l=>{var o,i;return l.title.toLowerCase().includes(t.toLowerCase())||((o=l.description)==null?void 0:o.toLowerCase().includes(t.toLowerCase()))||((i=l.category)==null?void 0:i.toLowerCase().includes(t.toLowerCase()))})),s&&(s.status&&(a=a.filter(l=>l.status===s.status)),s.priority&&(a=a.filter(l=>l.priority===s.priority)),s.assigned_to&&(a=a.filter(l=>l.assigned_to===s.assigned_to)),s.category&&(a=a.filter(l=>l.category===s.category))),a}catch(a){return x(a,"searchTasks"),[]}},async getTasksByUser(t){try{return I().filter(a=>a.assigned_to===t)}catch(s){return x(s,"getTasksByUser"),[]}},async getOverdueTasks(){try{const t=I(),s=new Date;return t.filter(a=>!a.due_date||a.status==="completed"||a.status==="cancelled"?!1:new Date(a.due_date)<s)}catch(t){return x(t,"getOverdueTasks"),[]}},getStatusText(t){return{pending:"Bekliyor",in_progress:"Devam Ediyor",completed:"Tamamlandı",cancelled:"İptal Edildi",overdue:"Süresi Geçti"}[t]||t},getPriorityText(t){return{low:"Düşük",medium:"Orta",high:"Yüksek",urgent:"Acil"}[t]||t},getPriorityColor(t){return{low:"bg-blue-100 text-blue-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"},getStatusColor(t){return{pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800",overdue:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"}},Fe=ye({title:K().min(1,"Görev başlığı zorunludur"),description:K().optional(),assigned_to:K().min(1,"Görev atanacak kişi seçilmelidir"),due_date:K().optional(),priority:fe(["low","medium","high","urgent"]),category:K().optional(),estimated_hours:je().min(0).optional()});function Be({onSuccess:t,onCancel:s,initialData:a,isEditMode:l=!1,taskId:o}){const[i,w]=d.useState(!1),{register:y,handleSubmit:b,watch:S,formState:{errors:j}}=ge({resolver:pe(Fe),defaultValues:{title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",assigned_to:(a==null?void 0:a.assigned_to)||"",due_date:a!=null&&a.due_date?new Date(a.due_date).toISOString().slice(0,16):"",priority:(a==null?void 0:a.priority)||"medium",category:(a==null?void 0:a.category)||"",estimated_hours:(a==null?void 0:a.estimated_hours)||0}}),T=S("priority"),O=async c=>{w(!0);try{const D={title:c.title,description:c.description,assigned_to:c.assigned_to,due_date:c.due_date?new Date(c.due_date).toISOString():void 0,priority:c.priority,category:c.category,estimated_hours:c.estimated_hours};l&&o?(await h.updateTask(o,D),f.success("Görev güncellendi")):(await h.createTask(D),f.success("Görev oluşturuldu")),t==null||t()}catch(D){console.error("Task operation failed:",D),f.error(l?"Görev güncellenirken hata oluştu":"Görev oluşturulurken hata oluştu")}finally{w(!1)}},_=c=>{switch(c){case"urgent":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-yellow-500 bg-yellow-50";case"low":return"border-blue-500 bg-blue-50";default:return"border-gray-300 bg-white"}},M=c=>{switch(c){case"urgent":return"Acil";case"high":return"Yüksek";case"medium":return"Orta";case"low":return"Düşük";default:return"Orta"}};return e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:l?"Görev Düzenle":"Yeni Görev Oluştur"}),s&&e.jsx(u,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(le,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:b(O),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Görev Başlığı *"}),e.jsx("input",{...y("title"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Görev başlığını giriniz"}),j.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Açıklama"}),e.jsx("textarea",{...y("description"),rows:4,className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Görev açıklamasını giriniz"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"assigned_to",className:"block text-sm font-medium mb-2",children:[e.jsx(U,{className:"h-4 w-4 inline mr-2"}),"Atanan Kişi *"]}),e.jsxs("select",{...y("assigned_to"),className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",disabled:!1,children:[e.jsx("option",{value:"",children:"Kişi seçin"}),e.jsx("option",{value:"user1",children:"Ali Veli"}),e.jsx("option",{value:"user2",children:"Ayşe Demir"}),e.jsx("option",{value:"user3",children:"Mehmet Can"})]}),j.assigned_to&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.assigned_to.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"priority",className:"block text-sm font-medium mb-2",children:[e.jsx(Z,{className:"h-4 w-4 inline mr-2"}),"Öncelik"]}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:["low","medium","high","urgent"].map(c=>e.jsxs("label",{className:`flex items-center justify-center p-2 border-2 rounded-md cursor-pointer transition-all ${T===c?_(c):"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{...y("priority"),type:"radio",value:c,className:"sr-only"}),e.jsx("span",{className:"text-xs font-medium",children:M(c)})]},c))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"due_date",className:"block text-sm font-medium mb-2",children:[e.jsx(ce,{className:"h-4 w-4 inline mr-2"}),"Bitiş Tarihi"]}),e.jsx("input",{...y("due_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium mb-2",children:[e.jsx(we,{className:"h-4 w-4 inline mr-2"}),"Kategori"]}),e.jsxs("select",{...y("category"),className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",children:[e.jsx("option",{value:"",children:"Kategori seçin"}),e.jsx("option",{value:"development",children:"Geliştirme"}),e.jsx("option",{value:"reporting",children:"Raporlama"}),e.jsx("option",{value:"database",children:"Veritabanı"}),e.jsx("option",{value:"design",children:"Tasarım"}),e.jsx("option",{value:"testing",children:"Test"}),e.jsx("option",{value:"documentation",children:"Dökümantasyon"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"estimated_hours",className:"block text-sm font-medium mb-2",children:[e.jsx(Q,{className:"h-4 w-4 inline mr-2"}),"Tahmini Süre (Saat)"]}),e.jsx("input",{...y("estimated_hours",{valueAsNumber:!0}),type:"number",min:"0",step:"0.5",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s&&e.jsx(u,{type:"button",variant:"outline",onClick:s,children:"İptal"}),e.jsxs(u,{type:"submit",disabled:i,children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),i?"Kaydediliyor...":l?"Güncelle":"Oluştur"]})]})]})]})}function Ye({taskId:t,isOpen:s,onClose:a,onEdit:l,onDelete:o}){const[i,w]=d.useState(null),[y,b]=d.useState([]),[S,j]=d.useState([]),[T,O]=d.useState([]),[_,M]=d.useState(!1),[c,D]=d.useState("overview"),[F,N]=d.useState(""),[C,B]=d.useState(!1),[H,G]=d.useState(!1),{user:E}=xe(),W=!0,X=!0,R=E==null?void 0:E.id;d.useEffect(()=>{s&&t&&J()},[s,t]);const J=async()=>{M(!0);try{const[r,m,g,v]=await Promise.all([h.getTask(t),h.getTaskComments(t),h.getTaskAttachments(t),h.getTaskActivities(t)]);w(r),b(m),j(g),O(v)}catch(r){console.error("Failed to fetch task details:",r),f.error("Görev detayları yüklenirken hata oluştu")}finally{M(!1)}},P=async r=>{if(i)try{const m=await h.updateTask(t,{status:r});w(m);const g=await h.getTaskActivities(t);O(g),f.success("Görev durumu güncellendi")}catch(m){console.error("Failed to update task status:",m),f.error("Görev durumu güncellenirken hata oluştu")}},V=async()=>{if(i&&window.confirm("Bu görevi silmek istediğinizden emin misiniz?"))try{await h.deleteTask(t),f.success("Görev silindi"),o==null||o(t),a()}catch(r){console.error("Failed to delete task:",r),f.error("Görev silinirken hata oluştu")}},Y=async()=>{if(F.trim())try{const r=await h.addTaskComment(t,F);b(g=>[...g,r]),N(""),B(!1);const m=await h.getTaskActivities(t);O(m)}catch(r){console.error("Failed to add comment:",r),f.error("Yorum eklenirken hata oluştu")}},ee=async r=>{var g;const m=(g=r.target.files)==null?void 0:g[0];if(m){G(!0);try{const v=await h.uploadTaskAttachment(t,m);j(he=>[...he,v])}catch(v){console.error("Failed to upload file:",v),f.error("Dosya yüklenirken hata oluştu")}finally{G(!1),r.target.value=""}}},te=async r=>{if(window.confirm("Bu dosyayı silmek istediğinizden emin misiniz?"))try{await h.deleteTaskAttachment(r),j(m=>m.filter(g=>g.id!==r))}catch(m){console.error("Failed to delete attachment:",m),f.error("Dosya silinirken hata oluştu")}},se=r=>{if(r===0)return"0 Bytes";const m=1024,g=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(r)/Math.log(m));return parseFloat((r/Math.pow(m,v)).toFixed(2))+" "+g[v]},ae=r=>{switch(r){case"completed":return e.jsx(L,{className:"h-4 w-4 text-green-600"});case"in_progress":return e.jsx(oe,{className:"h-4 w-4 text-blue-600"});case"overdue":return e.jsx(de,{className:"h-4 w-4 text-red-600"});case"cancelled":return e.jsx(le,{className:"h-4 w-4 text-gray-600"});default:return e.jsx(Q,{className:"h-4 w-4 text-yellow-600"})}},n=r=>{switch(r){case"urgent":return e.jsx(de,{className:"h-4 w-4 text-red-600"});case"high":return e.jsx(Z,{className:"h-4 w-4 text-orange-600"});case"medium":return e.jsx(Z,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(Z,{className:"h-4 w-4 text-blue-600"})}},$=r=>{switch(r){case"created":return e.jsx(q,{className:"h-4 w-4 text-green-600"});case"assigned":return e.jsx(U,{className:"h-4 w-4 text-blue-600"});case"status_changed":return e.jsx(De,{className:"h-4 w-4 text-orange-600"});case"commented":return e.jsx(re,{className:"h-4 w-4 text-purple-600"});case"completed":return e.jsx(L,{className:"h-4 w-4 text-green-600"});case"due_date_changed":return e.jsx(ce,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(ie,{className:"h-4 w-4 text-gray-600"})}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ne,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Görev Detayları"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i&&W&&e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>l==null?void 0:l(i),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),e.jsxs(u,{size:"sm",variant:"outline",onClick:V,className:"text-red-600 hover:text-red-700",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Sil"]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(le,{className:"h-4 w-4"})})]})]}),_?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Yükleniyor..."})]}):i?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:[{id:"overview",label:"Genel Bakış",icon:_e},{id:"comments",label:"Yorumlar",icon:re,count:y.length},{id:"attachments",label:"Dosyalar",icon:ne,count:S.length},{id:"activity",label:"Aktivite",icon:ie,count:T.length}].map(r=>e.jsxs("button",{onClick:()=>D(r.id),className:`flex items-center px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${c===r.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[e.jsx(r.icon,{className:"h-4 w-4 mr-2"}),r.label,r.count!==void 0&&e.jsx("span",{className:"ml-2 bg-muted text-muted-foreground text-xs px-2 py-1 rounded-full",children:r.count})]},r.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:i.title}),i.description&&e.jsx("p",{className:"text-muted-foreground text-lg",children:i.description})]}),i.assigned_to===R&&X&&e.jsxs("div",{className:"flex space-x-2 ml-4",children:[i.status==="pending"&&e.jsxs(u,{size:"sm",onClick:()=>P("in_progress"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Başlat"]}),i.status==="in_progress"&&e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>P("pending"),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Duraklat"]}),(i.status==="pending"||i.status==="in_progress")&&e.jsxs(u,{size:"sm",onClick:()=>P("completed"),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(p,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Durum ve Öncelik"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Durum"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[ae(i.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.getStatusColor(i.status)}`,children:h.getStatusText(i.status)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Öncelik"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n(i.priority),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.getPriorityColor(i.priority)}`,children:h.getPriorityText(i.priority)})]})]})]})]}),e.jsxs(p,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Atama ve Tarihler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Atanan"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Kullanıcı ",i.assigned_to]}),i.assigned_to===R&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Benim"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Oluşturan"}),e.jsxs("span",{className:"text-sm",children:["Kullanıcı ",i.assigned_by]})]}),i.due_date&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Bitiş Tarihi"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:A(new Date(i.due_date),"dd MMM yyyy",{locale:z})})]})]})]})]}),(i.estimated_hours||i.actual_hours)&&e.jsxs(p,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Zaman Takibi"}),e.jsxs("div",{className:"space-y-3",children:[i.estimated_hours&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tahmini Süre"}),e.jsxs("span",{className:"text-sm",children:[i.estimated_hours," saat"]})]}),i.actual_hours&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Harcanan Süre"}),e.jsxs("span",{className:"text-sm",children:[i.actual_hours," saat"]})]}),i.estimated_hours&&i.actual_hours&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Verimlilik"}),e.jsxs("span",{className:`text-sm ${i.actual_hours<=i.estimated_hours?"text-green-600":"text-red-600"}`,children:[(i.estimated_hours/i.actual_hours*100).toFixed(0),"%"]})]})]})]}),e.jsxs(p,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Kategori ve Tarihler"}),e.jsxs("div",{className:"space-y-3",children:[i.category&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Kategori"}),e.jsx("span",{className:"text-sm bg-gray-100 text-gray-800 px-2 py-1 rounded",children:i.category})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Oluşturulma"}),e.jsx("span",{className:"text-sm",children:A(new Date(i.created_at),"dd MMM yyyy HH:mm",{locale:z})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Son Güncelleme"}),e.jsx("span",{className:"text-sm",children:A(new Date(i.updated_at),"dd MMM yyyy HH:mm",{locale:z})})]}),i.completed_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tamamlanma"}),e.jsx("span",{className:"text-sm text-green-600",children:A(new Date(i.completed_at),"dd MMM yyyy HH:mm",{locale:z})})]})]})]})]}),i.completion_notes&&e.jsxs(p,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Tamamlanma Notları"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:i.completion_notes})]})]}),c==="comments"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Yorumlar (",y.length,")"]}),!C&&e.jsxs(u,{size:"sm",onClick:()=>B(!0),children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Yorum Ekle"]})]}),C&&e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:F,onChange:r=>N(r.target.value),placeholder:"Yorumunuzu yazın...",className:"w-full h-24 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(u,{size:"sm",onClick:Y,children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Gönder"]}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{B(!1),N("")},children:"İptal"})]})]})}),y.length>0?e.jsx("div",{className:"space-y-3",children:y.map(r=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"font-medium text-sm",children:["Kullanıcı ",r.user_id]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:A(new Date(r.created_at),"dd MMM yyyy HH:mm",{locale:z})})]}),e.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:r.content})]})]})},r.id))}):!C&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(re,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz yorum eklenmemiş"})]})]}),c==="attachments"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Dosyalar (",S.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:ee,disabled:H}),e.jsxs(u,{size:"sm",onClick:()=>{var r;return(r=document.getElementById("file-upload"))==null?void 0:r.click()},disabled:H,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),H?"Yükleniyor...":"Dosya Ekle"]})]})]}),S.length>0?e.jsx("div",{className:"grid gap-3",children:S.map(r=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:r.file_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[se(r.file_size)," • Yüklendi: ",A(new Date(r.uploaded_at),"dd MMM yyyy",{locale:z})," • Yükleyen: Kullanıcı ",r.uploaded_by]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>window.open(r.file_url,"_blank"),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"İndir"]}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>te(r.id),className:"text-red-600 hover:text-red-700",children:e.jsx(me,{className:"h-4 w-4"})})]})]})},r.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(ne,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz dosya eklenmemiş"})]})]}),c==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Aktivite Geçmişi (",T.length,")"]}),T.length>0?e.jsx("div",{className:"space-y-3",children:T.map(r=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-0.5",children:$(r.activity_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("span",{className:"font-medium text-sm",children:["Kullanıcı ",r.user_id]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:A(new Date(r.created_at),"dd MMM yyyy HH:mm",{locale:z})})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.description}),r.old_value&&r.new_value&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"line-through",children:r.old_value})," → ",e.jsx("span",{className:"font-medium",children:r.new_value})]})]})]})},r.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz aktivite kaydı yok"})]})]})]})]}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Görev bulunamadı"})]})}):null}function Re(){const[t,s]=d.useState([]),[a,l]=d.useState(!0),[o,i]=d.useState(""),[w,y]=d.useState("all"),[b,S]=d.useState("all"),[j,T]=d.useState("all"),[O,_]=d.useState(!1),[M,c]=d.useState(null),[D,F]=d.useState(!1),[N,C]=d.useState(null),{user:B}=xe(),H=!0,G=B==null?void 0:B.id;d.useEffect(()=>{E()},[]);const E=async()=>{l(!0);try{const n=await h.getTasks();s(n)}catch(n){console.error("Failed to fetch tasks:",n),f.error("Görevler yüklenirken hata oluştu")}finally{l(!1)}},W=()=>{_(!1),C(null),E()},X=n=>{C(n),_(!0),F(!1)},R=n=>{s($=>$.filter(r=>r.id!==n))},J=n=>{c(n),F(!0)},P=async(n,$)=>{try{const r=await h.updateTask(n,{status:$});s(m=>m.map(g=>g.id===n?r:g)),f.success("Görev durumu güncellendi")}catch(r){console.error("Failed to update task status:",r),f.error("Görev durumu güncellenirken hata oluştu")}},V=t.filter(n=>{var v;const $=n.title.toLowerCase().includes(o.toLowerCase())||((v=n.description)==null?void 0:v.toLowerCase().includes(o.toLowerCase())),r=w==="all"||n.status===w,m=b==="all"||n.priority===b,g=j==="all"||j==="me"&&n.assigned_to===G||j==="others"&&n.assigned_to!==G;return $&&r&&m&&g}),Y={total:t.length,inProgress:t.filter(n=>n.status==="in_progress").length,completed:t.filter(n=>n.status==="completed").length,overdue:t.filter(n=>n.status==="overdue").length,myTasks:t.filter(n=>n.assigned_to===G).length},ee=n=>{switch(n){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},te=n=>{switch(n){case"urgent":return"Acil";case"high":return"Yüksek";case"medium":return"Orta";case"low":return"Düşük";default:return"Orta"}},se=n=>{switch(n){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}},ae=n=>{switch(n){case"completed":return"Tamamlandı";case"in_progress":return"Devam Ediyor";case"overdue":return"Süresi Geçti";case"cancelled":return"İptal Edildi";default:return"Bekliyor"}};return O?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(u,{variant:"outline",onClick:()=>{_(!1),C(null)},children:"← Geri"}),e.jsx("h1",{className:"text-3xl font-bold",children:N?"Görev Düzenle":"Yeni Görev"})]}),e.jsx(Be,{onSuccess:W,onCancel:()=>{_(!1),C(null)},initialData:N||void 0,isEditMode:!!N,taskId:N==null?void 0:N.id})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Görevler"}),e.jsx("p",{className:"text-muted-foreground",children:"Görev atama ve takip sistemi"})]}),e.jsxs(u,{onClick:()=>_(!0),children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Yeni Görev"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Görev"}),e.jsx("p",{className:"text-2xl font-bold",children:Y.total})]}),e.jsx(L,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Devam Eden"}),e.jsx("p",{className:"text-2xl font-bold",children:Y.inProgress})]}),e.jsx(Q,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tamamlanan"}),e.jsx("p",{className:"text-2xl font-bold",children:Y.completed})]}),e.jsx(L,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Süresi Geçen"}),e.jsx("p",{className:"text-2xl font-bold",children:Y.overdue})]}),e.jsx(de,{className:"h-8 w-8 text-red-500"})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Benim Görevlerim"}),e.jsx("p",{className:"text-2xl font-bold",children:Y.myTasks})]}),e.jsx(U,{className:"h-8 w-8 text-purple-500"})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Görev ara...",value:o,onChange:n=>i(n.target.value),className:"w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background"})]})}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("select",{value:w,onChange:n=>y(n.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"pending",children:"Bekliyor"}),e.jsx("option",{value:"in_progress",children:"Devam Ediyor"}),e.jsx("option",{value:"completed",children:"Tamamlandı"}),e.jsx("option",{value:"overdue",children:"Süresi Geçti"}),e.jsx("option",{value:"cancelled",children:"İptal Edildi"})]}),e.jsxs("select",{value:b,onChange:n=>S(n.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Öncelikler"}),e.jsx("option",{value:"urgent",children:"Acil"}),e.jsx("option",{value:"high",children:"Yüksek"}),e.jsx("option",{value:"medium",children:"Orta"}),e.jsx("option",{value:"low",children:"Düşük"})]}),e.jsxs("select",{value:j,onChange:n=>T(n.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Atamalar"}),e.jsx("option",{value:"me",children:"Benim Görevlerim"}),e.jsx("option",{value:"others",children:"Diğer Görevler"})]}),e.jsxs(u,{variant:"outline",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Filtreler"]})]})]}),a?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Görevler yükleniyor..."})]}):e.jsx(p,{className:"overflow-hidden",children:V.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Görev"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Atanan"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Bitiş Tarihi"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Öncelik"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Durum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"İşlemler"})]})}),e.jsx("tbody",{children:V.map(n=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.title}),n.description&&e.jsx("div",{className:"text-sm text-muted-foreground mt-1 truncate max-w-xs",children:n.description}),n.category&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 capitalize",children:n.category})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Kullanıcı ",n.assigned_to]}),n.assigned_to===G&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Benim"})]})}),e.jsx("td",{className:"p-4",children:n.due_date?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:A(new Date(n.due_date),"dd MMM yyyy",{locale:z})})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Belirsiz"})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee(n.priority)}`,children:te(n.priority)})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${se(n.status)}`,children:ae(n.status)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>J(n),children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"Detay"]}),n.assigned_to===G&&H&&e.jsxs(e.Fragment,{children:[n.status==="pending"&&e.jsx(u,{size:"sm",variant:"outline",onClick:()=>P(n.id,"in_progress"),className:"text-blue-600 hover:text-blue-700",children:e.jsx(oe,{className:"h-4 w-4"})}),(n.status==="pending"||n.status==="in_progress")&&e.jsx(u,{size:"sm",variant:"outline",onClick:()=>P(n.id,"completed"),className:"text-green-600 hover:text-green-700",children:e.jsx(ze,{className:"h-4 w-4"})})]})]})})]},n.id))})]})}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:o||w!=="all"||b!=="all"||j!=="all"?"Arama kriterlerine uygun görev bulunamadı":"Henüz görev oluşturulmamış"})}),M&&e.jsx(Ye,{taskId:M.id,isOpen:D,onClose:()=>{F(!1),c(null)},onEdit:X,onDelete:R})]})}export{Re as default};
