import{j as e}from"./query-D2a9LsAW.js";import{r as o}from"./vendor-Ba6jih-_.js";import{D as T}from"./DataTable-Dzg2kqPW.js";import{M as C}from"./Modal-BazkrsRl.js";import{e as w}from"./exportToCsv-CTUkvpR5.js";import{L as B}from"./LazyCameraScanner-CwDC2nGd.js";import{e as P,a as Y}from"./pdfExport-BP3xwtRw.js";import{a as h,aq as $,ar as R}from"./ui-yrixFDMZ.js";import"./supabase-B5p9Wfie.js";import"./index-DdeQrtE8.js";import"./router-PzPojOO1.js";const z=[{id:"1",date:"2024-01-15",donorName:"Ahmet Yılmaz",donorPhone:"0532 123 4567",amount:1e3,currency:"TRY",purpose:"Genel Bağış",receiptNo:"NAK-2024-001",receivedBy:"Fatma Demir",notes:"Nakit olarak teslim alındı",status:"onaylandı"},{id:"2",date:"2024-01-14",donorName:"Zeynep Kaya",donorPhone:"0543 987 6543",amount:500,currency:"TRY",purpose:"Eğitim Yardımı",receiptNo:"NAK-2024-002",receivedBy:"Mehmet Özkan",status:"onaylandı"}];function _(){const[a,c]=o.useState(z),[m,b]=o.useState(""),[N,i]=o.useState(!1),[d,u]=o.useState(null),[r,t]=o.useState({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),[p,x]=o.useState(!1),l=o.useMemo(()=>a.filter(s=>JSON.stringify(s).toLowerCase().includes(m.toLowerCase())),[a,m]),g=l.reduce((s,n)=>s+n.amount,0),j=[{key:"date",header:"Tarih"},{key:"receiptNo",header:"Fiş No"},{key:"donorName",header:"Bağışçı Adı"},{key:"donorPhone",header:"Telefon"},{key:"amount",header:"Tutar",render:(s,n)=>`${n.amount.toLocaleString("tr-TR")} ${n.currency}`},{key:"purpose",header:"Amaç"},{key:"receivedBy",header:"Teslim Alan"},{key:"status",header:"Durum",render:(s,n)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${n.status==="onaylandı"?"bg-green-100 text-green-800":n.status==="beklemede"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.status})},{key:"id",header:"İşlemler",render:(s,n)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(n),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>v(n),className:"text-green-600 hover:text-green-800 text-sm",children:"Yazdır"}),e.jsx("button",{onClick:()=>y(n.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],f=s=>{u(s),t({donorName:s.donorName,donorPhone:s.donorPhone,amount:s.amount.toString(),currency:s.currency,purpose:s.purpose,notes:s.notes||""}),i(!0)},y=s=>{confirm("Bu nakit bağışı silmek istediğinizden emin misiniz?")&&c(a.filter(n=>n.id!==s))},v=s=>{alert(`${s.receiptNo} numaralı makbuz yazdırılıyor...`)},k=s=>{if(s.preventDefault(),d)c(a.map(n=>n.id===d.id?{...n,...r,amount:parseFloat(r.amount)}:n));else{const n={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],...r,amount:parseFloat(r.amount),receiptNo:`NAK-${new Date().getFullYear()}-${String(a.length+1).padStart(3,"0")}`,receivedBy:"Sistem Kullanıcısı",status:"onaylandı"};c([...a,n])}i(!1),u(null),t({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""})},D=s=>{s&&(s.donorName!=null&&t(n=>({...n,donorName:s.donorName??n.donorName})),s.donorPhone!=null&&t(n=>({...n,donorPhone:s.donorPhone??n.donorPhone})),s.amount!=null&&t(n=>({...n,amount:(s.amount??Number(n.amount||0)).toString()})),s.currency!=null&&t(n=>({...n,currency:["TRY","USD","EUR"].includes(s.currency)?s.currency:n.currency})),s.purpose!=null&&t(n=>({...n,purpose:s.purpose??n.purpose})),s.notes!=null&&t(n=>({...n,notes:s.notes??n.notes})),s.firstName&&s.lastName&&t(n=>({...n,donorName:`${s.firstName} ${s.lastName}`})),s.phone&&t(n=>({...n,donorPhone:s.phone||""})),s.idNumber&&t(n=>({...n,notes:n.notes?`${n.notes} | TC: ${s.idNumber}`:`TC: ${s.idNumber}`})),s.passportNumber&&t(n=>({...n,notes:n.notes?`${n.notes} | Pasaport: ${s.passportNumber}`:`Pasaport: ${s.passportNumber}`})),s.address&&t(n=>({...n,notes:n.notes?`${n.notes} | Adres: ${s.address}`:`Adres: ${s.address}`})),s.birthDate&&t(n=>({...n,notes:n.notes?`${n.notes} | Doğum: ${s.birthDate}`:`Doğum: ${s.birthDate}`})),x(!1))},S=()=>{u(null),t({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),i(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Nakit Bağışlar"}),e.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Nakit Bağış"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Bağış"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:l.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Toplam Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[g.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Bugünkü Bağış"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"2"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("input",{value:m,onChange:s=>b(s.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Bağışçı adı, telefon, fiş no ile ara..."}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"iptal",children:"İptal"})]}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2"}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>w("nakit-bagislar.csv",l),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center gap-2",children:[e.jsx(h,{size:16}),"CSV İndir"]}),e.jsxs("button",{onClick:()=>P(l,{}),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[e.jsx($,{size:16}),"Excel İndir"]}),e.jsxs("button",{onClick:()=>Y(l,{}),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-2",children:[e.jsx(h,{size:16}),"PDF İndir"]})]})]}),e.jsx(T,{columns:j,data:l})]}),e.jsx(C,{isOpen:N,onClose:()=>i(!1),title:d?"Nakit Bağış Düzenle":"Yeni Nakit Bağış",children:e.jsxs("div",{className:"p-4",children:[!p&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>x(!0),className:"flex items-center gap-2 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[e.jsx(R,{size:16}),"Kamera Tara"]})}),p&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded mb-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Kamera Tarama Aktif"}),e.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex items-center gap-2 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Kapat"})]}),e.jsx(B,{onScanResult:D,onError:s=>console.error("Tarama hatası:",s)})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),e.jsx("input",{type:"text",value:r.donorName,onChange:s=>t({...r,donorName:s.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:r.donorPhone,onChange:s=>t({...r,donorPhone:s.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:r.amount,onChange:s=>t({...r,amount:s.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:r.currency,onChange:s=>t({...r,currency:s.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:r.purpose,onChange:s=>t({...r,purpose:s.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:r.notes,onChange:s=>t({...r,notes:s.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Ek bilgiler..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"Güncelle":"Kaydet"})]})]})]})})]})}export{_ as default};
