import{j as e}from"./query-D2a9LsAW.js";import{r}from"./vendor-Ba6jih-_.js";import{e as $}from"./exportToCsv-CTUkvpR5.js";import{D as W}from"./DataTable-Dzg2kqPW.js";import{M as X}from"./Modal-BazkrsRl.js";import{S as j}from"./StatCard-R_-DmWX7.js";import{u as Z,t as ee,o as ae,s as m,e as te}from"./types-Vcb-PP2J.js";import{V as d}from"./index-v3sBR1NV.js";import{ab as se,k as re,H as P,U as le,v as ne,S as ie,aa as de,aH as oe,aN as ce,ao as me,aw as ue}from"./ui-yrixFDMZ.js";const xe=ae({category:m().min(1,"Kategori seçiniz"),key:m().min(1,"Parametre anahtarı giriniz"),value:m().min(1,"Değer giriniz"),description:m().min(1,"Açıklama giriniz"),data_type:te(["string","number","boolean","json","date"],{message:"Veri tipi seçiniz"}),validation_rules:m().optional(),default_value:m().optional()}),D=["Genel Ayarlar","Yardım Limitleri","Başvuru Ayarları","Bildirim Ayarları","Rapor Ayarları","Güvenlik Ayarları","Entegrasyon Ayarları","İş Akışı Ayarları","Kullanıcı Ayarları","Sistem Ayarları"],C=[{value:"string",label:"Metin"},{value:"number",label:"Sayı"},{value:"boolean",label:"Doğru/Yanlış"},{value:"json",label:"JSON"},{value:"date",label:"Tarih"}];function Ne(){const[f,y]=r.useState([]),[p,T]=r.useState({totalParameters:0,systemParameters:0,userParameters:0,categories:0}),[A,O]=r.useState(!0),[o,I]=r.useState(""),[h,z]=r.useState("all"),[g,L]=r.useState("all"),[u,V]=r.useState("all"),[E,c]=r.useState(!1),[x,S]=r.useState(null),[_,K]=r.useState(!1),{register:n,handleSubmit:M,formState:{errors:l},reset:Y,watch:B}=Z({resolver:ee(xe)}),v=B("data_type");r.useEffect(()=>{F(),w()},[]);const F=async()=>{try{const a=[{id:"1",category:"Yardım Limitleri",key:"max_monthly_aid_amount",value:"5000",description:"Aylık maksimum yardım tutarı (TL)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:0,max:50000",default_value:"3000",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),updated_by:"admin@example.com"},{id:"2",category:"Başvuru Ayarları",key:"application_review_period_days",value:"7",description:"Başvuru değerlendirme süresi (gün)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:1,max:30",default_value:"5",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),updated_by:"admin@example.com"},{id:"3",category:"Bildirim Ayarları",key:"email_notifications_enabled",value:"true",description:"E-posta bildirimlerini etkinleştir",data_type:"boolean",is_system:!1,is_editable:!0,validation_rules:"",default_value:"true",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),updated_by:"admin@example.com"},{id:"4",category:"Sistem Ayarları",key:"database_version",value:"1.2.5",description:"Veritabanı şema versiyonu",data_type:"string",is_system:!0,is_editable:!1,validation_rules:"",default_value:"1.0.0",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),updated_by:"system"},{id:"5",category:"Güvenlik Ayarları",key:"session_timeout_minutes",value:"30",description:"Oturum zaman aşımı süresi (dakika)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:5,max:480",default_value:"30",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),updated_by:"admin@example.com"},{id:"6",category:"Genel Ayarlar",key:"organization_name",value:"Yardım Derneği",description:"Organizasyon adı",data_type:"string",is_system:!1,is_editable:!0,validation_rules:"min:2,max:100",default_value:"Yardım Organizasyonu",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),updated_by:"admin@example.com"}];y(a)}catch(a){console.error("Parametreler yüklenirken hata:",a),d.error("Parametreler yüklenirken hata oluştu")}finally{O(!1)}},w=async()=>{try{T({totalParameters:25,systemParameters:8,userParameters:17,categories:10})}catch(a){console.error("İstatistikler yüklenirken hata:",a)}},N=r.useMemo(()=>f.filter(a=>{const t=o===""||a.key.toLowerCase().includes(o.toLowerCase())||a.description.toLowerCase().includes(o.toLowerCase())||a.value.toLowerCase().includes(o.toLowerCase())||a.category.toLowerCase().includes(o.toLowerCase()),s=h==="all"||a.category===h,i=g==="all"||a.data_type===g,Q=u==="all"||u==="system"&&a.is_system||u==="user"&&!a.is_system,U=_||!a.is_system;return t&&s&&i&&Q&&U}),[f,o,h,g,u,_]),G=async a=>{try{const t={id:Date.now().toString(),...a,is_system:!1,is_editable:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),updated_by:"current_user@example.com"};x?(y(s=>s.map(i=>i.id===x.id?{...t,id:x.id}:i)),d.success("Parametre başarıyla güncellendi")):(y(s=>[t,...s]),d.success("Parametre başarıyla oluşturuldu")),c(!1),Y(),w()}catch(t){console.error("Parametre kaydedilirken hata:",t),d.error("Parametre kaydedilirken hata oluştu")}},b=async(a,t)=>{try{y(s=>s.map(i=>i.id===a?{...i,value:t,updated_at:new Date().toISOString(),updated_by:"current_user@example.com"}:i)),d.success("Parametre değeri güncellendi")}catch(s){console.error("Parametre güncellenirken hata:",s),d.error("Parametre güncellenirken hata oluştu")}},H=async a=>{try{const t=f.find(s=>s.id===a);t&&t.default_value&&(await b(a,t.default_value),d.success("Parametre varsayılan değere sıfırlandı"))}catch(t){console.error("Parametre sıfırlanırken hata:",t),d.error("Parametre sıfırlanırken hata oluştu")}},R=a=>{const s={string:{label:"Metin",class:"bg-blue-100 text-blue-800"},number:{label:"Sayı",class:"bg-green-100 text-green-800"},boolean:{label:"Boolean",class:"bg-purple-100 text-purple-800"},json:{label:"JSON",class:"bg-orange-100 text-orange-800"},date:{label:"Tarih",class:"bg-pink-100 text-pink-800"}}[a]||{label:a,class:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${s.class}`,children:s.label})},k=a=>{switch(a.data_type){case"boolean":return a.value==="true"?"Evet":"Hayır";case"date":try{return new Date(a.value).toLocaleDateString("tr-TR")}catch{return a.value}case"json":try{return JSON.stringify(JSON.parse(a.value),null,2)}catch{return a.value}default:return a.value}},J=a=>new Date(a).toLocaleString("tr-TR"),q=[{key:"category",header:"Kategori",render:(a,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.category}),t.is_system&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(P,{className:"h-3 w-3 text-red-600"}),e.jsx("span",{className:"text-xs text-red-600",children:"Sistem"})]})]})},{key:"key",header:"Anahtar",render:(a,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm",children:t.key}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})},{key:"value",header:"Değer",render:(a,t)=>e.jsx("div",{className:"max-w-xs",children:t.is_editable&&!t.is_system?e.jsxs("div",{className:"space-y-2",children:[t.data_type==="boolean"?e.jsxs("select",{value:t.value,onChange:s=>b(t.id,s.target.value),className:"w-full rounded border px-2 py-1 text-sm",children:[e.jsx("option",{value:"true",children:"Evet"}),e.jsx("option",{value:"false",children:"Hayır"})]}):t.data_type==="json"?e.jsx("textarea",{value:t.value,onChange:s=>b(t.id,s.target.value),className:"w-full rounded border px-2 py-1 text-sm font-mono",rows:3}):e.jsx("input",{type:t.data_type==="number"?"number":t.data_type==="date"?"date":"text",value:t.value,onChange:s=>b(t.id,s.target.value),className:"w-full rounded border px-2 py-1 text-sm"}),t.default_value&&t.value!==t.default_value&&e.jsxs("button",{onClick:()=>H(t.id),className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800",title:"Varsayılan değere sıfırla",children:[e.jsx(ce,{className:"h-3 w-3"}),"Sıfırla"]})]}):e.jsx("div",{className:"text-sm",children:t.data_type==="json"?e.jsx("pre",{className:"text-xs font-mono bg-gray-50 p-2 rounded max-h-20 overflow-auto",children:k(t)}):e.jsx("span",{className:t.is_system?"text-muted-foreground":"",children:k(t)})})})},{key:"data_type",header:"Tip",render:(a,t)=>R(t.data_type)},{key:"validation",header:"Doğrulama",render:(a,t)=>e.jsxs("div",{children:[t.validation_rules?e.jsx("div",{className:"text-xs font-mono bg-gray-50 p-1 rounded",children:t.validation_rules}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"}),t.default_value&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Varsayılan: ",t.default_value]})]})},{key:"updated_info",header:"Güncelleme",render:(a,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:J(t.updated_at)}),t.updated_by&&e.jsx("div",{className:"text-xs text-muted-foreground",children:t.updated_by})]})},{key:"actions",header:"İşlemler",render:(a,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"rounded p-1 text-gray-600 hover:bg-gray-50",title:"Detay",children:e.jsx(me,{className:"h-4 w-4"})}),t.is_editable&&e.jsx("button",{onClick:()=>{S(t),c(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:e.jsx(ue,{className:"h-4 w-4"})})]})}];return A?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Yükleniyor..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Parametreler"}),e.jsx("p",{className:"text-muted-foreground",children:"Sistem parametrelerini yönetin ve yapılandırın"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:a=>K(a.target.checked),className:"rounded"}),e.jsx("label",{className:"text-sm",children:"Sistem parametrelerini göster"})]}),e.jsxs("button",{onClick:()=>{S(null),c(!0)},className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[e.jsx(se,{className:"h-4 w-4"}),"Yeni Parametre"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(j,{title:"Toplam Parametreler",value:p.totalParameters.toString(),icon:e.jsx(re,{className:"h-5 w-5 text-blue-700"}),accentClass:"bg-blue-100"}),e.jsx(j,{title:"Sistem Parametreleri",value:p.systemParameters.toString(),icon:e.jsx(P,{className:"h-5 w-5 text-red-700"}),accentClass:"bg-red-100"}),e.jsx(j,{title:"Kullanıcı Parametreleri",value:p.userParameters.toString(),icon:e.jsx(le,{className:"h-5 w-5 text-green-700"}),accentClass:"bg-green-100"}),e.jsx(j,{title:"Kategoriler",value:p.categories.toString(),icon:e.jsx(ne,{className:"h-5 w-5 text-purple-700"}),accentClass:"bg-purple-100"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Parametre ara...",value:o,onChange:a=>I(a.target.value),className:"min-w-64 rounded border px-3 py-2 text-sm"})]}),e.jsxs("select",{value:h,onChange:a=>z(a.target.value),className:"rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Kategoriler"}),D.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsxs("select",{value:g,onChange:a=>L(a.target.value),className:"rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Tipler"}),C.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),e.jsxs("select",{value:u,onChange:a=>V(a.target.value),className:"rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"system",children:"Sistem Parametreleri"}),e.jsx("option",{value:"user",children:"Kullanıcı Parametreleri"})]}),e.jsxs("button",{onClick:()=>$("parametreler.csv",N),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[e.jsx(de,{className:"h-4 w-4"}),"İndir"]}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[N.length," parametre"]})]}),e.jsx(W,{columns:q,data:N}),e.jsxs(X,{open:E,onClose:()=>c(!1),children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:x?"Parametre Düzenle":"Yeni Parametre"}),e.jsx("button",{onClick:()=>c(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"})]}),e.jsxs("form",{onSubmit:M(G),className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori *"}),e.jsxs("select",{...n("category"),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz..."}),D.map(a=>e.jsx("option",{value:a,children:a},a))]}),l.category&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Veri Tipi *"}),e.jsxs("select",{...n("data_type"),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz..."}),C.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),l.data_type&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.data_type.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Parametre Anahtarı *"}),e.jsx("input",{type:"text",...n("key"),className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:"parameter_key_name"}),l.key&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.key.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama *"}),e.jsx("textarea",{...n("description"),rows:2,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Parametrenin açıklaması..."}),l.description&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.description.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Değer *"}),v==="boolean"?e.jsxs("select",{...n("value"),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz..."}),e.jsx("option",{value:"true",children:"Evet"}),e.jsx("option",{value:"false",children:"Hayır"})]}):v==="json"?e.jsx("textarea",{...n("value"),rows:4,className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:'{"key": "value"}'}):e.jsx("input",{type:v==="number"?"number":v==="date"?"date":"text",...n("value"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Parametre değeri"}),l.value&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.value.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Varsayılan Değer"}),e.jsx("input",{type:"text",...n("default_value"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Varsayılan değer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Doğrulama Kuralları"}),e.jsx("input",{type:"text",...n("validation_rules"),className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:"min:0,max:100 veya required,email"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Örnek: min:0,max:100 veya required,email"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[e.jsx(oe,{className:"h-4 w-4"}),x?"Güncelle":"Kaydet"]})]})]})]})]})}export{Ne as default};
