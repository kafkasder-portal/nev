import{j as e}from"./query-D2a9LsAW.js";import{r as o}from"./vendor-Ba6jih-_.js";import{D as K}from"./DataTable-Dzg2kqPW.js";import{M as B}from"./Modal-BazkrsRl.js";import{e as z}from"./exportToCsv-CTUkvpR5.js";const Y=[{id:"1",code:"GENEL001",name:"Genel Bağış Fonu",description:"Derneğin genel faaliyetleri için kullanılacak bağışlar",category:"genel",targetAmount:1e5,collectedAmount:75e3,currency:"TRY",startDate:"2024-01-01",endDate:"2024-12-31",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Nakit","Banka","Kredi Kartı","Online"],autoAllocation:!0,allocationRules:"Gelen bağışların %100'ü bu fona aktarılır",responsiblePerson:"Ahmet Yılmaz",approvalRequired:!1,donationCount:245,lastDonationDate:"2024-01-14",notes:"Ana bağış fonu",createdDate:"2024-01-01",createdBy:"Admin"},{id:"2",code:"EGITIM001",name:"Eğitim Yardımı Fonu",description:"Öğrencilere burs ve eğitim materyali desteği",category:"eğitim",targetAmount:5e4,collectedAmount:32e3,currency:"TRY",startDate:"2024-01-01",endDate:"2024-06-30",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Banka","Kredi Kartı","Online"],autoAllocation:!1,responsiblePerson:"Zeynep Kaya",approvalRequired:!0,donationCount:89,lastDonationDate:"2024-01-13",notes:"Okul öncesi ve ilkokul öğrencileri öncelikli",createdDate:"2024-01-01",createdBy:"Admin"},{id:"3",code:"SAGLIK001",name:"Sağlık Yardımı Fonu",description:"Tedavi masrafları ve ilaç yardımları",category:"sağlık",targetAmount:3e4,collectedAmount:18500,currency:"TRY",startDate:"2024-01-01",isActive:!0,priority:"kritik",allowedPaymentMethods:["Nakit","Banka","Kredi Kartı"],autoAllocation:!1,responsiblePerson:"Dr. Mehmet Öz",approvalRequired:!0,donationCount:67,lastDonationDate:"2024-01-12",notes:"Acil tedavi durumları öncelikli",createdDate:"2024-01-01",createdBy:"Admin"},{id:"4",code:"KURBAN2024",name:"Kurban Bağışları 2024",description:"2024 yılı kurban bağışları ve organizasyonu",category:"kurban",targetAmount:8e4,collectedAmount:45e3,currency:"TRY",startDate:"2024-03-01",endDate:"2024-07-31",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Nakit","Banka","Kredi Kartı","Online"],autoAllocation:!0,allocationRules:"Kurban bağışları otomatik olarak bu fona aktarılır",responsiblePerson:"Ali Demir",approvalRequired:!1,donationCount:156,lastDonationDate:"2024-01-14",createdDate:"2024-03-01",createdBy:"Admin"},{id:"5",code:"RAMAZAN2024",name:"Ramazan Yardımları 2024",description:"Ramazan ayı gıda kolisi ve iftar organizasyonları",category:"ramazan",targetAmount:6e4,collectedAmount:25e3,currency:"TRY",startDate:"2024-02-01",endDate:"2024-05-31",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Nakit","Banka","Online"],autoAllocation:!1,responsiblePerson:"Fatma Şahin",approvalRequired:!1,donationCount:98,lastDonationDate:"2024-01-11",notes:"Gıda kolisi ve iftar organizasyonu",createdDate:"2024-02-01",createdBy:"Admin"}];function $(){const[c,m]=o.useState(Y),[g,y]=o.useState(""),[x,v]=o.useState(""),[d,j]=o.useState(""),[k,u]=o.useState(!1),[p,h]=o.useState(null),[l,r]=o.useState({code:"",name:"",description:"",category:"genel",targetAmount:"",currency:"TRY",startDate:"",endDate:"",priority:"orta",allowedPaymentMethods:[],autoAllocation:!1,allocationRules:"",responsiblePerson:"",approvalRequired:!1,notes:""}),s=o.useMemo(()=>c.filter(a=>{const t=JSON.stringify(a).toLowerCase().includes(g.toLowerCase()),n=!x||a.category===x,i=!d||d==="aktif"&&a.isActive||d==="pasif"&&!a.isActive;return t&&n&&i}),[c,g,x,d]),N=s.reduce((a,t)=>a+(t.targetAmount||0),0),A=s.reduce((a,t)=>a+t.collectedAmount,0),f=s.filter(a=>a.isActive).length,D=[{key:"code",header:"Kod"},{key:"name",header:"Fon Adı"},{key:"category",header:"Kategori",render:(a,t)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.category==="genel"?"bg-gray-100 text-gray-800":t.category==="eğitim"?"bg-blue-100 text-blue-800":t.category==="sağlık"?"bg-red-100 text-red-800":t.category==="gıda"?"bg-green-100 text-green-800":t.category==="kurban"?"bg-purple-100 text-purple-800":t.category==="ramazan"?"bg-yellow-100 text-yellow-800":t.category==="acil"?"bg-red-100 text-red-800":"bg-indigo-100 text-indigo-800"}`,children:t.category})},{key:"targetAmount",header:"Hedef",render:(a,t)=>t.targetAmount?`${t.targetAmount.toLocaleString("tr-TR")} ${t.currency}`:"-"},{key:"collectedAmount",header:"Toplanan",render:(a,t)=>`${t.collectedAmount.toLocaleString("tr-TR")} ${t.currency}`},{key:"targetAmount",header:"İlerleme",render:(a,t)=>{if(!t.targetAmount)return"-";const n=Math.round(t.collectedAmount/t.targetAmount*100);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(n,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[n,"%"]})]})}},{key:"priority",header:"Öncelik",render:(a,t)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.priority==="kritik"?"bg-red-100 text-red-800":t.priority==="yüksek"?"bg-orange-100 text-orange-800":t.priority==="orta"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.priority})},{key:"donationCount",header:"Bağış Sayısı"},{key:"responsiblePerson",header:"Sorumlu"},{key:"isActive",header:"Durum",render:(a,t)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isActive?"Aktif":"Pasif"})},{key:"id",header:"İşlemler",render:(a,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>R(t.id),className:`text-sm ${t.isActive?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"}`,children:t.isActive?"Pasifleştir":"Aktifleştir"}),e.jsx("button",{onClick:()=>C(t.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],w=a=>{var t;h(a),r({code:a.code,name:a.name,description:a.description,category:a.category,targetAmount:((t=a.targetAmount)==null?void 0:t.toString())||"",currency:a.currency,startDate:a.startDate||"",endDate:a.endDate||"",priority:a.priority,allowedPaymentMethods:a.allowedPaymentMethods,autoAllocation:a.autoAllocation,allocationRules:a.allocationRules||"",responsiblePerson:a.responsiblePerson,approvalRequired:a.approvalRequired,notes:a.notes||""}),u(!0)},R=a=>{m(c.map(t=>t.id===a?{...t,isActive:!t.isActive}:t))},C=a=>{confirm("Bu fonlama tanımını silmek istediğinizden emin misiniz?")&&m(c.filter(t=>t.id!==a))},T=a=>{if(a.preventDefault(),p)m(c.map(t=>t.id===p.id?{...t,...l,targetAmount:l.targetAmount?parseFloat(l.targetAmount):void 0}:t));else{const t={id:Date.now().toString(),...l,targetAmount:l.targetAmount?parseFloat(l.targetAmount):void 0,collectedAmount:0,isActive:!0,donationCount:0,createdDate:new Date().toISOString().split("T")[0],createdBy:"Admin"};m([...c,t])}u(!1),h(null),b()},b=()=>{r({code:"",name:"",description:"",category:"genel",targetAmount:"",currency:"TRY",startDate:"",endDate:"",priority:"orta",allowedPaymentMethods:[],autoAllocation:!1,allocationRules:"",responsiblePerson:"",approvalRequired:!1,notes:""})},P=()=>{h(null),b(),u(!0)},S=(a,t)=>{r(t?{...l,allowedPaymentMethods:[...l.allowedPaymentMethods,a]}:{...l,allowedPaymentMethods:l.allowedPaymentMethods.filter(n=>n!==a)})},F=["Nakit","Banka","Kredi Kartı","Online","Çek","Havale"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Fonlama Tanımları"}),e.jsx("button",{onClick:P,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Fonlama Tanımı"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Fon"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Aktif Fon"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:f})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Toplam Hedef"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[N.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-600",children:"Toplanan"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[A.toLocaleString("tr-TR")," ₺"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Kategori Dağılımı"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:["genel","eğitim","sağlık","gıda","kurban","ramazan","acil","proje"].map(a=>{const t=s.filter(i=>i.category===a).length,n=s.filter(i=>i.category===a).reduce((i,M)=>i+M.collectedAmount,0);return e.jsxs("div",{className:"border rounded-lg p-3 text-center",children:[e.jsx("h4",{className:"font-medium capitalize text-sm",children:a}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t," fon"]}),e.jsxs("p",{className:"text-sm font-bold",children:[n.toLocaleString("tr-TR")," ₺"]})]},a)})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("input",{value:g,onChange:a=>y(a.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Fon adı, kod, sorumlu ile ara..."}),e.jsxs("select",{value:x,onChange:a=>v(a.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Kategoriler"}),e.jsx("option",{value:"genel",children:"Genel"}),e.jsx("option",{value:"eğitim",children:"Eğitim"}),e.jsx("option",{value:"sağlık",children:"Sağlık"}),e.jsx("option",{value:"gıda",children:"Gıda"}),e.jsx("option",{value:"kurban",children:"Kurban"}),e.jsx("option",{value:"ramazan",children:"Ramazan"}),e.jsx("option",{value:"acil",children:"Acil"}),e.jsx("option",{value:"proje",children:"Proje"})]}),e.jsxs("select",{value:d,onChange:a=>j(a.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"aktif",children:"Aktif"}),e.jsx("option",{value:"pasif",children:"Pasif"})]}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",placeholder:"Başlangıç tarihi"}),e.jsx("button",{onClick:()=>z("fonlama-tanimlari.csv",s),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Excel İndir"})]}),e.jsx(K,{columns:D,data:s})]}),e.jsx(B,{isOpen:k,onClose:()=>u(!1),title:p?"Fonlama Tanımı Düzenle":"Yeni Fonlama Tanımı",children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fon Kodu *"}),e.jsx("input",{type:"text",value:l.code,onChange:a=>r({...l,code:a.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"GENEL001",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori *"}),e.jsxs("select",{value:l.category,onChange:a=>r({...l,category:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"genel",children:"Genel"}),e.jsx("option",{value:"eğitim",children:"Eğitim"}),e.jsx("option",{value:"sağlık",children:"Sağlık"}),e.jsx("option",{value:"gıda",children:"Gıda"}),e.jsx("option",{value:"kurban",children:"Kurban"}),e.jsx("option",{value:"ramazan",children:"Ramazan"}),e.jsx("option",{value:"acil",children:"Acil"}),e.jsx("option",{value:"proje",children:"Proje"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fon Adı *"}),e.jsx("input",{type:"text",value:l.name,onChange:a=>r({...l,name:a.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Genel Bağış Fonu",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama *"}),e.jsx("textarea",{value:l.description,onChange:a=>r({...l,description:a.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Fonun amacı ve kullanım alanları...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hedef Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:l.targetAmount,onChange:a=>r({...l,targetAmount:a.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"100000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:l.currency,onChange:a=>r({...l,currency:a.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),e.jsxs("select",{value:l.priority,onChange:a=>r({...l,priority:a.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"düşük",children:"Düşük"}),e.jsx("option",{value:"orta",children:"Orta"}),e.jsx("option",{value:"yüksek",children:"Yüksek"}),e.jsx("option",{value:"kritik",children:"Kritik"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Başlangıç Tarihi"}),e.jsx("input",{type:"date",value:l.startDate,onChange:a=>r({...l,startDate:a.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bitiş Tarihi"}),e.jsx("input",{type:"date",value:l.endDate,onChange:a=>r({...l,endDate:a.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sorumlu Kişi *"}),e.jsx("input",{type:"text",value:l.responsiblePerson,onChange:a=>r({...l,responsiblePerson:a.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Ahmet Yılmaz",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"İzin Verilen Ödeme Yöntemleri"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:F.map(a=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.allowedPaymentMethods.includes(a),onChange:t=>S(a,t.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm",children:a})]},a))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.autoAllocation,onChange:a=>r({...l,autoAllocation:a.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Otomatik Tahsis"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.approvalRequired,onChange:a=>r({...l,approvalRequired:a.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Onay Gerekli"})]})]}),l.autoAllocation&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tahsis Kuralları"}),e.jsx("textarea",{value:l.allocationRules,onChange:a=>r({...l,allocationRules:a.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Otomatik tahsis kurallarını açıklayın..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:l.notes,onChange:a=>r({...l,notes:a.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Ek bilgiler ve notlar..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"Güncelle":"Oluştur"})]})]})})]})}export{$ as default};
