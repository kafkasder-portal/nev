import{j as s}from"./query-D2a9LsAW.js";import{r as o}from"./vendor-Ba6jih-_.js";import{s as r}from"./index-DdeQrtE8.js";import"./router-PzPojOO1.js";import"./supabase-B5p9Wfie.js";import"./ui-yrixFDMZ.js";const y=()=>{const[n,c]=o.useState([]),[l,i]=o.useState(!1),t=e=>{c(a=>[...a,e])},d=async()=>{i(!0),c([]);try{const{data:e,error:a}=await r.from("beneficiaries").select("count").limit(1);t(a?{success:!1,error:a,message:"Beneficiaries tablosuna erişim başarısız"}:{success:!0,data:e,message:"Beneficiaries tablosuna başarıyla bağlandı"})}catch(e){t({success:!1,error:e,message:"Beklenmeyen hata oluştu"})}try{{const{data:{user:e},error:a}=await r.auth.getUser();t(a?{success:!1,error:a,message:"Auth durumu kontrol edilemedi"}:{success:!0,data:e,message:e?`Kullanıcı giriş yapmış: ${e.email}`:"Kullanıcı giriş yapmamış"})}}catch(e){t({success:!1,error:e,message:"Auth kontrolünde hata"})}try{{const e=r.channel("test-channel");e.subscribe(a=>{t({success:a==="SUBSCRIBED",data:{status:a},message:`Realtime durumu: ${a}`})}),setTimeout(()=>{r.removeChannel(e)},3e3)}}catch(e){t({success:!1,error:e,message:"Realtime bağlantısında hata"})}i(!1)},m=async()=>{i(!0);try{const{data:e,error:a}=await r.from("beneficiaries").select("id, name, surname, status, created_at").limit(5);t(a?{success:!1,error:a,message:"Beneficiaries tablosu bulunamadı veya erişim hatası"}:{success:!0,data:e,message:`Beneficiaries tablosundan ${(e==null?void 0:e.length)||0} kayıt getirildi`})}catch(e){t({success:!1,error:e,message:"Beneficiaries tablosu testinde beklenmeyen hata"})}i(!1)},u=()=>{c([])};return s.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Supabase Bağlantı Testi"}),s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsx("button",{onClick:d,disabled:l,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:l?"Test Ediliyor...":"Genel Test"}),s.jsx("button",{onClick:m,disabled:l,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:"Beneficiaries Tablosu Test"}),s.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Temizle"})]}),s.jsx("div",{className:"space-y-4",children:n.map((e,a)=>s.jsxs("div",{className:`p-4 rounded-lg border ${e.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`text-lg ${e.success?"text-green-600":"text-red-600"}`,children:e.success?"✅":"❌"}),s.jsx("span",{className:"font-medium",children:e.message})]}),e.data&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Veri:"}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(e.data,null,2)})]}),e.error&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Hata:"}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(e.error,null,2)})]})]},a))}),n.length===0&&s.jsx("div",{className:"text-center text-gray-500 py-8",children:"Test sonuçları burada görünecek"})]})})};export{y as default};
