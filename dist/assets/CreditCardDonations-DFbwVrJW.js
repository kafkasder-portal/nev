import{j as e}from"./query-D2a9LsAW.js";import{r as n}from"./vendor-Ba6jih-_.js";import{D as I}from"./DataTable-Dzg2kqPW.js";import{M as f}from"./Modal-BazkrsRl.js";import{e as z}from"./exportToCsv-CTUkvpR5.js";const P=[{id:"1",date:"2024-01-15",donorName:"Ayşe Demir",donorPhone:"+90 532 123 4567",donorEmail:"ayse.demir@email.com",amount:500,currency:"TRY",cardNumber:"****-****-****-1234",cardType:"Visa",bankName:"İş Bankası",transactionId:"TXN789123456",authCode:"AUTH123",installments:1,purpose:"Eğitim Yardımı",status:"başarılı",commission:15,netAmount:485,notes:"Online bağış"},{id:"2",date:"2024-01-14",donorName:"Mehmet Kaya",donorPhone:"+90 533 987 6543",amount:1e3,currency:"TRY",cardNumber:"****-****-****-5678",cardType:"Mastercard",bankName:"Garanti BBVA",transactionId:"TXN456789123",authCode:"AUTH456",installments:3,purpose:"Genel Bağış",status:"başarılı",commission:30,netAmount:970},{id:"3",date:"2024-01-13",donorName:"Fatma Özkan",donorEmail:"fatma.ozkan@email.com",amount:250,currency:"TRY",cardNumber:"****-****-****-9012",cardType:"Troy",bankName:"Ziraat Bankası",transactionId:"TXN321654987",authCode:"AUTH789",installments:1,purpose:"Kurban",status:"beklemede",commission:7.5,netAmount:242.5}];function G(){const[m,h]=n.useState(P),[N,k]=n.useState(""),[T,u]=n.useState(!1),[C,b]=n.useState(!1),[j,g]=n.useState(null),[t,v]=n.useState(null),[r,l]=n.useState({donorName:"",donorPhone:"",donorEmail:"",amount:"",currency:"TRY",cardNumber:"",cardType:"Visa",bankName:"",transactionId:"",authCode:"",installments:"1",purpose:"",notes:""}),[d,x]=n.useState({refundAmount:"",refundReason:"",refundNotes:""}),o=n.useMemo(()=>m.filter(a=>JSON.stringify(a).toLowerCase().includes(N.toLowerCase())),[m,N]),S=o.reduce((a,s)=>a+s.amount,0),w=o.reduce((a,s)=>a+s.commission,0),R=o.reduce((a,s)=>a+s.netAmount,0),A=[{key:"date",header:"Tarih"},{key:"transactionId",header:"İşlem No"},{key:"donorName",header:"Bağışçı"},{key:"cardNumber",header:"Kart No"},{key:"cardType",header:"Kart Tipi",render:(a,s)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.cardType==="Visa"?"bg-blue-100 text-blue-800":s.cardType==="Mastercard"?"bg-red-100 text-red-800":s.cardType==="Troy"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:s.cardType})},{key:"amount",header:"Tutar",render:(a,s)=>`${s.amount.toLocaleString("tr-TR")} ${s.currency}`},{key:"installments",header:"Taksit",render:(a,s)=>s.installments===1?"Peşin":`${s.installments} Taksit`},{key:"commission",header:"Komisyon",render:(a,s)=>`${s.commission.toLocaleString("tr-TR")} ₺`},{key:"netAmount",header:"Net Tutar",render:(a,s)=>`${s.netAmount.toLocaleString("tr-TR")} ₺`},{key:"purpose",header:"Amaç"},{key:"status",header:"Durum",render:(a,s)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="başarılı"?"bg-green-100 text-green-800":s.status==="beklemede"?"bg-yellow-100 text-yellow-800":s.status==="başarısız"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.status})},{key:"id",header:"İşlemler",render:(a,s)=>e.jsxs("div",{className:"flex gap-2",children:[s.status==="başarılı"&&e.jsx("button",{onClick:()=>K(s),className:"text-orange-600 hover:text-orange-800 text-sm",children:"İade"}),e.jsx("button",{onClick:()=>B(s),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>E(s.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],B=a=>{g(a),l({donorName:a.donorName,donorPhone:a.donorPhone||"",donorEmail:a.donorEmail||"",amount:a.amount.toString(),currency:a.currency,cardNumber:a.cardNumber,cardType:a.cardType,bankName:a.bankName,transactionId:a.transactionId,authCode:a.authCode,installments:a.installments.toString(),purpose:a.purpose,notes:a.notes||""}),u(!0)},K=a=>{v(a),x({refundAmount:a.amount.toString(),refundReason:"",refundNotes:""}),b(!0)},E=a=>{confirm("Bu kredi kartı bağışını silmek istediğinizden emin misiniz?")&&h(m.filter(s=>s.id!==a))},D=a=>{a.preventDefault();const s=parseFloat(r.amount),p=s*.03,i=s-p;if(j)h(m.map(c=>c.id===j.id?{...c,...r,amount:s,installments:parseInt(r.installments),commission:p,netAmount:i}:c));else{const c={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],...r,amount:s,installments:parseInt(r.installments),commission:p,netAmount:i,status:"başarılı"};h([...m,c])}u(!1),g(null),y()},Y=a=>{a.preventDefault(),t&&h(m.map(s=>s.id===t.id?{...s,status:"iade",notes:`İade: ${d.refundReason}. ${d.refundNotes}`}:s)),b(!1),v(null),x({refundAmount:"",refundReason:"",refundNotes:""})},y=()=>{l({donorName:"",donorPhone:"",donorEmail:"",amount:"",currency:"TRY",cardNumber:"",cardType:"Visa",bankName:"",transactionId:"",authCode:"",installments:"1",purpose:"",notes:""})},M=()=>{g(null),y(),u(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Kredi Kartı Bağışları"}),e.jsx("button",{onClick:M,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Kredi Kartı Bağışı"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam İşlem"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:o.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Brüt Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[S.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-600",children:"Komisyon"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[w.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Net Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[R.toLocaleString("tr-TR")," ₺"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Kart Tipi Dağılımı"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:["Visa","Mastercard","Troy","American Express"].map(a=>{const s=o.filter(i=>i.cardType===a).length,p=o.filter(i=>i.cardType===a).reduce((i,c)=>i+c.amount,0);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium",children:a}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s," işlem"]}),e.jsxs("p",{className:"text-lg font-bold",children:[p.toLocaleString("tr-TR")," ₺"]})]},a)})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("input",{value:N,onChange:a=>k(a.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Bağışçı, kart no, işlem no ile ara..."}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"başarılı",children:"Başarılı"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"başarısız",children:"Başarısız"}),e.jsx("option",{value:"iade",children:"İade"})]}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Kart Tipleri"}),e.jsx("option",{value:"Visa",children:"Visa"}),e.jsx("option",{value:"Mastercard",children:"Mastercard"}),e.jsx("option",{value:"Troy",children:"Troy"}),e.jsx("option",{value:"American Express",children:"American Express"})]}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2"}),e.jsx("button",{onClick:()=>z("kredi-karti-bagislar.csv",o),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Excel İndir"})]}),e.jsx(I,{columns:A,data:o})]}),e.jsx(f,{isOpen:T,onClose:()=>u(!1),title:j?"Kredi Kartı Bağışı Düzenle":"Yeni Kredi Kartı Bağışı",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),e.jsx("input",{type:"text",value:r.donorName,onChange:a=>l({...r,donorName:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:r.donorPhone,onChange:a=>l({...r,donorPhone:a.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),e.jsx("input",{type:"email",value:r.donorEmail,onChange:a=>l({...r,donorEmail:a.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:r.amount,onChange:a=>l({...r,amount:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:r.currency,onChange:a=>l({...r,currency:a.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kart Numarası (Maskelenmiş)"}),e.jsx("input",{type:"text",value:r.cardNumber,onChange:a=>l({...r,cardNumber:a.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"****-****-****-1234",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kart Tipi"}),e.jsxs("select",{value:r.cardType,onChange:a=>l({...r,cardType:a.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"Visa",children:"Visa"}),e.jsx("option",{value:"Mastercard",children:"Mastercard"}),e.jsx("option",{value:"Troy",children:"Troy"}),e.jsx("option",{value:"American Express",children:"American Express"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Banka"}),e.jsx("input",{type:"text",value:r.bankName,onChange:a=>l({...r,bankName:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taksit Sayısı"}),e.jsxs("select",{value:r.installments,onChange:a=>l({...r,installments:a.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"1",children:"Peşin"}),e.jsx("option",{value:"2",children:"2 Taksit"}),e.jsx("option",{value:"3",children:"3 Taksit"}),e.jsx("option",{value:"6",children:"6 Taksit"}),e.jsx("option",{value:"9",children:"9 Taksit"}),e.jsx("option",{value:"12",children:"12 Taksit"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İşlem No"}),e.jsx("input",{type:"text",value:r.transactionId,onChange:a=>l({...r,transactionId:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Yetki Kodu"}),e.jsx("input",{type:"text",value:r.authCode,onChange:a=>l({...r,authCode:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:r.purpose,onChange:a=>l({...r,purpose:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:r.notes,onChange:a=>l({...r,notes:a.target.value}),className:"w-full border rounded px-3 py-2",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:j?"Güncelle":"Kaydet"})]})]})}),e.jsx(f,{isOpen:C,onClose:()=>b(!1),title:"Kredi Kartı İadesi",children:e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"İşlem Bilgileri"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bağışçı:"})," ",t==null?void 0:t.donorName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tutar:"})," ",t==null?void 0:t.amount.toLocaleString("tr-TR")," ",t==null?void 0:t.currency]}),e.jsxs("p",{children:[e.jsx("strong",{children:"İşlem No:"})," ",t==null?void 0:t.transactionId]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kart:"})," ",t==null?void 0:t.cardNumber]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Tutarı"}),e.jsx("input",{type:"number",step:"0.01",value:d.refundAmount,onChange:a=>x({...d,refundAmount:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Sebebi"}),e.jsxs("select",{value:d.refundReason,onChange:a=>x({...d,refundReason:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Bağışçı Talebi",children:"Bağışçı Talebi"}),e.jsx("option",{value:"Teknik Hata",children:"Teknik Hata"}),e.jsx("option",{value:"Yanlış İşlem",children:"Yanlış İşlem"}),e.jsx("option",{value:"İptal Talebi",children:"İptal Talebi"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Notları"}),e.jsx("textarea",{value:d.refundNotes,onChange:a=>x({...d,refundNotes:a.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"İade ile ilgili ek bilgiler..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"İade İşlemini Başlat"})]})]})})]})}export{G as default};
