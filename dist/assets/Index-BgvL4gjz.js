import{j as e}from"./query-D2a9LsAW.js";import{r as d}from"./vendor-Ba6jih-_.js";import{u as se,C as p,B as i,n as M,o as L}from"./index-DdeQrtE8.js";import{u as ce,t as oe,o as me,a as ue,s as O,e as xe,l as he}from"./types-Vcb-PP2J.js";import{u as b,X as ae,d as E,ak as V,o as K,aP as F,U as R,aH as X,aw as pe,ax as ge,a as je,M as Q,au as ee,c as te,av as fe,b as ye,ab as Y,S as Ne,F as be,ao as we}from"./ui-yrixFDMZ.js";import{V as h}from"./index-v3sBR1NV.js";import"./router-PzPojOO1.js";import"./supabase-B5p9Wfie.js";const u=(s,a)=>{console.error(`${a}:`,s);const n=(s==null?void 0:s.message)||`Error in ${a}`;throw b.error(n),new Error(n)},y={async getMeetings(){try{return[{id:"1",title:"Aylık Genel Kurul Toplantısı",description:"Dernek faaliyetlerinin değerlendirildiği aylık toplantı",start_date:new Date(Date.now()+1728e5).toISOString(),end_date:new Date(Date.now()+1728e5+72e5).toISOString(),location:"Dernek Merkezi - Konferans Salonu",meeting_type:"physical",status:"scheduled",created_by:"user1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",title:"Bütçe Planlama Toplantısı",description:"2024 yılı bütçe planlama ve değerlendirme toplantısı",start_date:new Date(Date.now()+432e6).toISOString(),end_date:new Date(Date.now()+432e6+108e5).toISOString(),meeting_type:"online",meeting_url:"https://meet.google.com/abc-def-ghi",status:"scheduled",created_by:"user2",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",title:"Proje Koordinasyon Toplantısı",description:"Devam eden projelerin koordinasyonu",start_date:new Date(Date.now()-864e5).toISOString(),end_date:new Date(Date.now()-864e5+54e5).toISOString(),location:"Zoom Toplantısı",meeting_type:"hybrid",meeting_url:"https://zoom.us/j/123456789",status:"completed",created_by:"user3",created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:new Date().toISOString()}]}catch(s){return u(s,"getMeetings"),[]}},async getMeeting(s){try{return(await this.getMeetings()).find(n=>n.id===s)||null}catch(a){return u(a,"getMeeting"),null}},async createMeeting(s){try{const a={id:`meeting_${Date.now()}`,title:s.title,description:s.description,start_date:s.start_date,end_date:s.end_date,location:s.location,meeting_type:s.meeting_type,meeting_url:s.meeting_url,status:"scheduled",created_by:"current_user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return b.success("Toplantı başarıyla oluşturuldu"),a}catch(a){throw u(a,"createMeeting"),a}},async updateMeeting(s,a){try{const m=(await this.getMeetings()).find(l=>l.id===s);if(!m)throw new Error("Toplantı bulunamadı");const g={...m,...a,updated_at:new Date().toISOString()};return b.success("Toplantı başarıyla güncellendi"),g}catch(n){throw u(n,"updateMeeting"),n}},async deleteMeeting(s){try{b.success("Toplantı başarıyla silindi")}catch(a){throw u(a,"deleteMeeting"),a}},async getAttendees(s){try{return[{id:"1",meeting_id:s,user_id:"user1",status:"accepted",response_date:new Date().toISOString(),notes:"Katılacağım"},{id:"2",meeting_id:s,user_id:"user2",status:"invited",notes:""},{id:"3",meeting_id:s,user_id:"user3",status:"declined",response_date:new Date(Date.now()-864e5).toISOString(),notes:"Başka bir toplantım var"}]}catch(a){return u(a,"getAttendees"),[]}},async addAttendee(s,a){try{const n={id:`attendee_${Date.now()}`,meeting_id:s,user_id:a,status:"invited"};return b.success("Katılımcı eklendi"),n}catch(n){throw u(n,"addAttendee"),n}},async updateAttendeeStatus(s,a,n){try{b.success("Katılım durumu güncellendi")}catch(m){throw u(m,"updateAttendeeStatus"),m}},async getAgenda(s){try{return[{id:"1",meeting_id:s,title:"Açılış ve Katılımcı Tanıtımı",description:"Toplantının açılışı ve katılımcıların tanıtımı",duration_minutes:15,order_index:1,presenter_id:"user1"},{id:"2",meeting_id:s,title:"Geçen Ay Faaliyetlerinin Değerlendirilmesi",description:"Önceki dönem faaliyetlerinin detaylı incelenmesi",duration_minutes:30,order_index:2,presenter_id:"user2"},{id:"3",meeting_id:s,title:"Yeni Projeler ve Öneri Sunumları",description:"Gelecek dönem için planlanan projeler",duration_minutes:45,order_index:3,presenter_id:"user3"}].sort((n,m)=>n.order_index-m.order_index)}catch(a){return u(a,"getAgenda"),[]}},async addAgendaItem(s){try{const a={id:`agenda_${Date.now()}`,...s};return b.success("Gündem maddesi eklendi"),a}catch(a){throw u(a,"addAgendaItem"),a}},async updateAgendaItem(s,a){try{b.success("Gündem maddesi güncellendi")}catch(n){throw u(n,"updateAgendaItem"),n}},async deleteAgendaItem(s){try{b.success("Gündem maddesi silindi")}catch(a){throw u(a,"deleteAgendaItem"),a}},async getMinutes(s){try{return[{id:"1",meeting_id:s,content:"Toplantı saat 14:00'da başladı. Tüm katılımcılar mevcut.",created_by:"user1",created_at:new Date().toISOString()}]}catch(a){return u(a,"getMinutes"),[]}},async addMinutes(s,a){try{const n={id:`minutes_${Date.now()}`,meeting_id:s,content:a,created_by:"current_user",created_at:new Date().toISOString()};return b.success("Tutanak eklendi"),n}catch(n){throw u(n,"addMinutes"),n}},async getActionItems(s){try{return[{id:"1",meeting_id:s,title:"Bütçe raporu hazırlama",description:"Bir sonraki toplantı için detaylı bütçe raporu hazırlanacak",assigned_to:"user2",due_date:new Date(Date.now()+6048e5).toISOString(),status:"pending",created_at:new Date().toISOString()},{id:"2",meeting_id:s,title:"Proje önerilerini gözden geçirme",description:"Sunulan proje önerilerinin teknik değerlendirmesi",assigned_to:"user3",due_date:new Date(Date.now()+2592e5).toISOString(),status:"in_progress",created_at:new Date().toISOString()}]}catch(a){return u(a,"getActionItems"),[]}},async addActionItem(s){try{const a={id:`action_${Date.now()}`,...s,created_at:new Date().toISOString()};return b.success("Eylem maddesi eklendi"),a}catch(a){throw u(a,"addActionItem"),a}},async updateActionItemStatus(s,a){try{b.success("Eylem durumu güncellendi")}catch(n){throw u(n,"updateActionItemStatus"),n}}},ve=me({title:O().min(1,"Toplantı başlığı zorunludur"),description:O().optional(),start_date:O().min(1,"Başlangıç tarihi zorunludur"),end_date:O().min(1,"Bitiş tarihi zorunludur"),location:O().optional(),meeting_type:xe(["physical","online","hybrid"]),meeting_url:O().url("Geçerli bir URL giriniz").optional().or(he("")),attendees:ue(O()).optional()}).refine(s=>{const a=new Date(s.start_date);return new Date(s.end_date)>a},{message:"Bitiş tarihi başlangıç tarihinden sonra olmalıdır",path:["end_date"]});function _e({onSuccess:s,onCancel:a,initialData:n,isEditMode:m=!1,meetingId:g}){const[l,S]=d.useState(!1),[_]=d.useState((n==null?void 0:n.attendee_ids)||[]),{user:I}=se(),{register:c,handleSubmit:H,watch:A,formState:{errors:j}}=ce({resolver:oe(ve),defaultValues:{title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",start_date:n!=null&&n.start_date?new Date(n.start_date).toISOString().slice(0,16):"",end_date:n!=null&&n.end_date?new Date(n.end_date).toISOString().slice(0,16):"",location:(n==null?void 0:n.location)||"",meeting_type:(n==null?void 0:n.meeting_type)||"physical",meeting_url:(n==null?void 0:n.meeting_url)||"",attendees:_}}),w=A("meeting_type"),N=async x=>{S(!0);try{const k={title:x.title,description:x.description,start_date:new Date(x.start_date).toISOString(),end_date:new Date(x.end_date).toISOString(),location:x.location,meeting_type:x.meeting_type,meeting_url:x.meeting_url,status:"scheduled",created_by:(I==null?void 0:I.id)||"",attendee_ids:_};m&&g?(await y.updateMeeting(g,k),h.success("Toplantı güncellendi")):(await y.createMeeting(k),h.success("Toplantı oluşturuldu")),s==null||s()}catch(k){console.error("Meeting operation failed:",k),h.error(m?"Toplantı güncellenirken hata oluştu":"Toplantı oluşturulurken hata oluştu")}finally{S(!1)}};return e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:m?"Toplantı Düzenle":"Yeni Toplantı Oluştur"}),a&&e.jsx(i,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:H(N),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Toplantı Başlığı *"}),e.jsx("input",{...c("title"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı başlığını giriniz"}),j.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Açıklama"}),e.jsx("textarea",{...c("description"),rows:3,className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı açıklamasını giriniz"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium mb-2",children:[e.jsx(E,{className:"h-4 w-4 inline mr-2"}),"Başlangıç Tarihi *"]}),e.jsx("input",{...c("start_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),j.start_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.start_date.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium mb-2",children:[e.jsx(V,{className:"h-4 w-4 inline mr-2"}),"Bitiş Tarihi *"]}),e.jsx("input",{...c("end_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),j.end_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.end_date.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meeting_type",className:"block text-sm font-medium mb-2",children:"Toplantı Türü *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...c("meeting_type"),type:"radio",value:"physical",className:"mr-2"}),e.jsx(K,{className:"h-4 w-4 mr-2 text-green-500"}),e.jsx("span",{children:"Fiziksel"})]}),e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...c("meeting_type"),type:"radio",value:"online",className:"mr-2"}),e.jsx(F,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{children:"Online"})]}),e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...c("meeting_type"),type:"radio",value:"hybrid",className:"mr-2"}),e.jsx(K,{className:"h-4 w-4 mr-1 text-green-500"}),e.jsx(F,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{children:"Hibrit"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-2",children:w==="online"?"Toplantı Linki":"Konum"}),w==="online"?e.jsx("input",{...c("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"https://zoom.us/j/123456789"}):e.jsx("input",{...c("location"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı konumunu giriniz"}),w==="hybrid"&&e.jsx("div",{className:"mt-2",children:e.jsx("input",{...c("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Online katılım linki (opsiyonel)"})}),j.meeting_url&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.meeting_url.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.jsx(R,{className:"h-4 w-4 inline mr-2"}),"Katılımcılar"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Kullanıcı seçici bileşeni eklenecek"}),_.length>0&&e.jsxs("div",{className:"text-sm",children:[_.length," katılımcı seçildi"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[a&&e.jsx(i,{type:"button",variant:"outline",onClick:a,children:"İptal"}),e.jsxs(i,{type:"submit",disabled:l,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),l?"Kaydediliyor...":m?"Güncelle":"Oluştur"]})]})]})]})}function ke({meetingId:s,isOpen:a,onClose:n,onEdit:m,onDelete:g}){const[l,S]=d.useState(null),[_,I]=d.useState([]),[c,H]=d.useState([]),[A,j]=d.useState([]),[w,N]=d.useState([]),[x,k]=d.useState(!1),[D,U]=d.useState("details"),[P,G]=d.useState(""),[B,z]=d.useState(!1),[r,f]=d.useState({title:"",description:"",assigned_to:"",due_date:""}),[v,T]=d.useState(!1),{user:q}=se(),ne=!0;d.useEffect(()=>{a&&s&&Z()},[a,s]);const Z=async()=>{k(!0);try{const[t,o,C,$,de]=await Promise.all([y.getMeeting(s),y.getAttendees(s),y.getAgenda(s),y.getMinutes(s),y.getActionItems(s)]);S(t),I(o),H(C),j($),N(de)}catch(t){console.error("Failed to fetch meeting details:",t),h.error("Toplantı bilgileri yüklenirken hata oluştu")}finally{k(!1)}},W=async t=>{if(!(!l||!q))try{await y.updateAttendeeStatus("temp_id",t),h.success("Katılım durumunuz güncellendi"),Z()}catch(o){console.error("Failed to update attendance:",o),h.error("Katılım durumu güncellenirken hata oluştu")}},re=async()=>{if(l&&window.confirm("Bu toplantıyı silmek istediğinizden emin misiniz?"))try{await y.deleteMeeting(s),h.success("Toplantı silindi"),g==null||g(s),n()}catch(t){console.error("Failed to delete meeting:",t),h.error("Toplantı silinirken hata oluştu")}},le=async()=>{if(P.trim())try{const t=await y.addMinutes(s,P);j(o=>[...o,t]),G(""),z(!1),h.success("Tutanak eklendi")}catch(t){console.error("Failed to add minutes:",t),h.error("Tutanak eklenirken hata oluştu")}},ie=async()=>{if(!(!r.title.trim()||!r.assigned_to))try{const t={meeting_id:s,title:r.title,description:r.description||void 0,assigned_to:r.assigned_to,due_date:r.due_date||void 0,status:"pending"},o=await y.addActionItem(t);N(C=>[...C,o]),f({title:"",description:"",assigned_to:"",due_date:""}),T(!1),h.success("Eylem maddesi eklendi")}catch(t){console.error("Failed to add action item:",t),h.error("Eylem maddesi eklenirken hata oluştu")}},J=async(t,o)=>{try{await y.updateActionItemStatus(t,o),N(C=>C.map($=>$.id===t?{...$,status:o}:$))}catch(C){console.error("Failed to update action status:",C),h.error("Eylem durumu güncellenirken hata oluştu")}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Toplantı Detayları"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&ne&&e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>m==null?void 0:m(l),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),e.jsxs(i,{size:"sm",variant:"outline",onClick:re,className:"text-red-600 hover:text-red-700",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Sil"]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(ae,{className:"h-4 w-4"})})]})]}),x?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Yükleniyor..."})]}):l?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:[{id:"details",label:"Detaylar",icon:je},{id:"attendees",label:"Katılımcılar",icon:R,count:_.length},{id:"agenda",label:"Gündem",icon:E,count:c.length},{id:"minutes",label:"Tutanak",icon:Q,count:A.length},{id:"actions",label:"Eylemler",icon:ee,count:w.length}].map(t=>e.jsxs("button",{onClick:()=>U(t.id),className:`flex items-center px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${D===t.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[e.jsx(t.icon,{className:"h-4 w-4 mr-2"}),t.label,t.count!==void 0&&e.jsx("span",{className:"ml-2 bg-muted text-muted-foreground text-xs px-2 py-1 rounded-full",children:t.count})]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[D==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:l.title}),l.description&&e.jsx("p",{className:"text-muted-foreground mb-4",children:l.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:M(new Date(l.start_date),"dd MMMM yyyy",{locale:L})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[M(new Date(l.start_date),"HH:mm")," - ",M(new Date(l.end_date),"HH:mm")]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l.meeting_type==="online"?e.jsx(F,{className:"h-4 w-4 text-blue-500"}):l.meeting_type==="hybrid"?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 text-green-500"}),e.jsx(F,{className:"h-4 w-4 text-blue-500"})]}):e.jsx(K,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"capitalize",children:l.meeting_type==="physical"?"Fiziksel":l.meeting_type==="online"?"Online":"Hibrit"})]}),l.location&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:l.location})]})]}),l.meeting_url&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:l.meeting_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 underline",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Toplantıya Katıl"]})}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.status==="scheduled"?"bg-blue-100 text-blue-800":l.status==="ongoing"?"bg-green-100 text-green-800":l.status==="completed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:l.status==="scheduled"?"Planlandı":l.status==="ongoing"?"Devam Ediyor":l.status==="completed"?"Tamamlandı":"İptal Edildi"})})]}),l.status==="scheduled"&&e.jsxs(p,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Katılım Durumunuz"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>W("accepted"),className:"text-green-600 hover:text-green-700",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Katılacağım"]}),e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>W("declined"),className:"text-red-600 hover:text-red-700",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Katılamayacağım"]}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>W("maybe"),children:"Belki"})]})]})]}),D==="attendees"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Katılımcılar (",_.length,")"]}),e.jsxs(i,{size:"sm",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Katılımcı Ekle"]})]}),e.jsx("div",{className:"grid gap-3",children:_.map(t=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"U"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Kullanıcı ",t.user_id]}),t.notes&&e.jsx("div",{className:"text-sm text-muted-foreground",children:t.notes}),t.response_date&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Yanıt: ",M(new Date(t.response_date),"dd MMM HH:mm",{locale:L})]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.status==="accepted"?"bg-green-100 text-green-800":t.status==="declined"?"bg-red-100 text-red-800":t.status==="maybe"?"bg-yellow-100 text-yellow-800":t.status==="attended"?"bg-blue-100 text-blue-800":(t.status==="absent","bg-gray-100 text-gray-800")}`,children:t.status==="accepted"?"Kabul Etti":t.status==="declined"?"Reddetti":t.status==="maybe"?"Belki":t.status==="attended"?"Katıldı":t.status==="absent"?"Katılmadı":"Davet Edildi"})]})},t.id))})]}),D==="agenda"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Gündem (",c.length," madde)"]}),e.jsxs(i,{size:"sm",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Gündem Ekle"]})]}),c.length>0?e.jsx("div",{className:"space-y-3",children:c.map((t,o)=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium",children:o+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-lg",children:t.title}),t.description&&e.jsx("p",{className:"text-muted-foreground mt-2",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[t.duration_minutes&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),t.duration_minutes," dakika"]}),t.presenter_id&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),"Sunan: Kullanıcı ",t.presenter_id]})]})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz gündem maddesi eklenmemiş"})]})]}),D==="minutes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Toplantı Tutanağı"}),!B&&e.jsxs(i,{size:"sm",onClick:()=>z(!0),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Tutanak Ekle"]})]}),B&&e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:P,onChange:t=>G(t.target.value),placeholder:"Tutanak metni...",className:"w-full h-32 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{size:"sm",onClick:le,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{z(!1),G("")},children:"İptal"})]})]})}),A.length>0?e.jsx("div",{className:"space-y-3",children:A.map(t=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:M(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:L})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Yazan: Kullanıcı ",t.created_by]})]}),e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:t.content})]})},t.id))}):!B&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Q,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz tutanak eklenmemiş"})]})]}),D==="actions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Eylem Maddeleri"}),!v&&e.jsxs(i,{size:"sm",onClick:()=>T(!0),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Eylem Ekle"]})]}),v&&e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:r.title,onChange:t=>f(o=>({...o,title:t.target.value})),placeholder:"Eylem başlığı...",className:"w-full p-3 border rounded-md"}),e.jsx("textarea",{value:r.description,onChange:t=>f(o=>({...o,description:t.target.value})),placeholder:"Açıklama...",className:"w-full h-20 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:r.assigned_to,onChange:t=>f(o=>({...o,assigned_to:t.target.value})),placeholder:"Atanan kişi ID...",className:"p-3 border rounded-md"}),e.jsx("input",{type:"date",value:r.due_date,onChange:t=>f(o=>({...o,due_date:t.target.value})),className:"p-3 border rounded-md"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{size:"sm",onClick:ie,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{T(!1),f({title:"",description:"",assigned_to:"",due_date:""})},children:"İptal"})]})]})}),w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(t=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="in_progress"?"bg-blue-100 text-blue-800":t.status==="cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:t.status==="completed"?"Tamamlandı":t.status==="in_progress"?"Devam Ediyor":t.status==="cancelled"?"İptal Edildi":"Bekliyor"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Atanan: Kullanıcı ",t.assigned_to]}),t.due_date&&e.jsxs("span",{children:["Son Tarih: ",M(new Date(t.due_date),"dd MMM yyyy",{locale:L})]})]}),t.status!=="completed"&&e.jsxs("div",{className:"flex space-x-1",children:[t.status==="pending"&&e.jsx(i,{size:"sm",variant:"outline",onClick:()=>J(t.id,"in_progress"),children:"Başlat"}),e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>J(t.id,"completed"),className:"text-green-600 hover:text-green-700",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Tamamla"]})]})]})]})},t.id))}):!v&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(ee,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz eylem maddesi eklenmemiş"})]})]})]})]}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Toplantı bulunamadı"})]})}):null}function Oe(){const[s,a]=d.useState([]),[n,m]=d.useState(!0),[g,l]=d.useState(""),[S,_]=d.useState("all"),[I,c]=d.useState(!1),[H,A]=d.useState(null),[j,w]=d.useState(!1),[N,x]=d.useState(null);d.useEffect(()=>{k()},[]);const k=async()=>{m(!0);try{const r=await y.getMeetings();a(r)}catch(r){console.error("Failed to fetch meetings:",r),h.error("Toplantılar yüklenirken hata oluştu")}finally{m(!1)}},D=()=>{c(!1),x(null),k()},U=r=>{x(r),c(!0),w(!1)},P=r=>{a(f=>f.filter(v=>v.id!==r))},G=r=>{A(r),w(!0)},B=s.filter(r=>{var T;const f=r.title.toLowerCase().includes(g.toLowerCase())||((T=r.description)==null?void 0:T.toLowerCase().includes(g.toLowerCase())),v=S==="all"||r.status===S;return f&&v}),z={total:s.length,thisWeek:s.filter(r=>{const f=new Date(r.start_date),v=new Date,T=new Date(v.setDate(v.getDate()-v.getDay())),q=new Date(T.getTime()+7*24*60*60*1e3);return f>=T&&f<q}).length,ongoing:s.filter(r=>r.status==="ongoing").length,completed:s.filter(r=>r.status==="completed").length};return I?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{variant:"outline",onClick:()=>{c(!1),x(null)},children:"← Geri"}),e.jsx("h1",{className:"text-3xl font-bold",children:N?"Toplantı Düzenle":"Yeni Toplantı"})]}),e.jsx(_e,{onSuccess:D,onCancel:()=>{c(!1),x(null)},initialData:N||void 0,isEditMode:!!N,meetingId:N==null?void 0:N.id})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Toplantılar"}),e.jsx("p",{className:"text-muted-foreground",children:"Toplantı planlama ve yönetimi"})]}),e.jsxs(i,{onClick:()=>c(!0),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Yeni Toplantı"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Toplantı"}),e.jsx("p",{className:"text-2xl font-bold",children:z.total})]}),e.jsx(E,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bu Hafta"}),e.jsx("p",{className:"text-2xl font-bold",children:z.thisWeek})]}),e.jsx(V,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Devam Eden"}),e.jsx("p",{className:"text-2xl font-bold",children:z.ongoing})]}),e.jsx(R,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tamamlanan"}),e.jsx("p",{className:"text-2xl font-bold",children:z.completed})]}),e.jsx(E,{className:"h-8 w-8 text-purple-500"})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Toplantı ara...",value:g,onChange:r=>l(r.target.value),className:"w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:S,onChange:r=>_(r.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"scheduled",children:"Planlandı"}),e.jsx("option",{value:"ongoing",children:"Devam Ediyor"}),e.jsx("option",{value:"completed",children:"Tamamlandı"}),e.jsx("option",{value:"cancelled",children:"İptal Edildi"})]}),e.jsxs(i,{variant:"outline",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Filtreler"]})]})]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Toplantılar yükleniyor..."})]}):e.jsx(p,{className:"overflow-hidden",children:B.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Toplantı"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Tarih & Saat"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Tür & Konum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Durum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"İşlemler"})]})}),e.jsx("tbody",{children:B.map(r=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.title}),r.description&&e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:r.description})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:M(new Date(r.start_date),"dd MMM yyyy",{locale:L})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[M(new Date(r.start_date),"HH:mm")," - ",M(new Date(r.end_date),"HH:mm")]})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[r.meeting_type==="online"?e.jsx(F,{className:"h-4 w-4 text-blue-500"}):r.meeting_type==="hybrid"?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 text-green-500"}),e.jsx(F,{className:"h-4 w-4 text-blue-500"})]}):e.jsx(K,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"capitalize",children:r.meeting_type==="physical"?"Fiziksel":r.meeting_type==="online"?"Online":"Hibrit"}),r.location&&e.jsx("div",{className:"text-sm text-muted-foreground",children:r.location})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.status==="scheduled"?"bg-blue-100 text-blue-800":r.status==="ongoing"?"bg-green-100 text-green-800":r.status==="completed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:r.status==="scheduled"?"Planlandı":r.status==="ongoing"?"Devam Ediyor":r.status==="completed"?"Tamamlandı":"İptal Edildi"})}),e.jsx("td",{className:"p-4",children:e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>G(r),children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Detaylar"]})})]},r.id))})]})}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:g||S!=="all"?"Arama kriterlerine uygun toplantı bulunamadı":"Henüz toplantı oluşturulmamış"})}),H&&e.jsx(ke,{meetingId:H.id,isOpen:j,onClose:()=>{w(!1),A(null)},onEdit:U,onDelete:P})]})}export{Oe as default};
