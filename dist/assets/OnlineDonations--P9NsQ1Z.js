import{j as e}from"./query-D2a9LsAW.js";import{r as d}from"./vendor-Ba6jih-_.js";import{D as V}from"./DataTable-Dzg2kqPW.js";import{M as K}from"./Modal-BazkrsRl.js";import{A as E}from"./AdvancedSearchModal-sf7G-Bu4.js";import{e as Z}from"./exportToCsv-CTUkvpR5.js";import{e as J,a as X}from"./pdfExport-BP3xwtRw.js";import{F as ee,a as P,aq as ae}from"./ui-yrixFDMZ.js";import"./sanitization-B2vlJvdx.js";import"./index-DdeQrtE8.js";import"./router-PzPojOO1.js";import"./supabase-B5p9Wfie.js";const re=[{key:"search",type:"text",label:"Genel Arama",placeholder:"Bağışçı adı, e-posta veya işlem no ile ara..."},{key:"donorName",type:"text",label:"Bağışçı Adı",placeholder:"Bağışçı adını girin"},{key:"donorEmail",type:"text",label:"E-posta",placeholder:"E-posta adresini girin"},{key:"status",type:"multiSelect",label:"Durum",options:[{value:"başarılı",label:"Başarılı"},{value:"beklemede",label:"Beklemede"},{value:"başarısız",label:"Başarısız"},{value:"iptal",label:"İptal"},{value:"iade",label:"İade"}]},{key:"platform",type:"multiSelect",label:"Platform",options:[{value:"Web Sitesi",label:"Web Sitesi"},{value:"Mobil Uygulama",label:"Mobil Uygulama"},{value:"Facebook",label:"Facebook"},{value:"Instagram",label:"Instagram"},{value:"WhatsApp",label:"WhatsApp"},{value:"SMS",label:"SMS"}]},{key:"paymentMethod",type:"multiSelect",label:"Ödeme Yöntemi",options:[{value:"Kredi Kartı",label:"Kredi Kartı"},{value:"Banka Kartı",label:"Banka Kartı"},{value:"Havale/EFT",label:"Havale/EFT"},{value:"Mobil Ödeme",label:"Mobil Ödeme"},{value:"Dijital Cüzdan",label:"Dijital Cüzdan"}]},{key:"amountRange",type:"numberRange",label:"Tutar Aralığı",placeholder:"Min - Max tutar"},{key:"currency",type:"multiSelect",label:"Para Birimi",options:[{value:"TRY",label:"TRY"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"}]},{key:"purpose",type:"multiSelect",label:"Bağış Amacı",options:[{value:"Genel Bağış",label:"Genel Bağış"},{value:"Eğitim Yardımı",label:"Eğitim Yardımı"},{value:"Sağlık Yardımı",label:"Sağlık Yardımı"},{value:"Gıda Yardımı",label:"Gıda Yardımı"},{value:"Kurban",label:"Kurban"},{value:"Ramazan",label:"Ramazan"},{value:"Diğer",label:"Diğer"}]},{key:"isRecurring",type:"select",label:"Bağış Tipi",options:[{value:"true",label:"Düzenli Bağışlar"},{value:"false",label:"Tek Seferlik Bağışlar"}]},{key:"recurringPeriod",type:"multiSelect",label:"Düzenli Bağış Periyodu",options:[{value:"Aylık",label:"Aylık"},{value:"Üç Aylık",label:"Üç Aylık"},{value:"Altı Aylık",label:"Altı Aylık"},{value:"Yıllık",label:"Yıllık"}]},{key:"referralSource",type:"multiSelect",label:"Yönlendirme Kaynağı",options:[{value:"Organik Arama",label:"Organik Arama"},{value:"Google Ads",label:"Google Ads"},{value:"Facebook Ads",label:"Facebook Ads"},{value:"E-posta Kampanyası",label:"E-posta Kampanyası"},{value:"SMS Kampanyası",label:"SMS Kampanyası"},{value:"Sosyal Medya",label:"Sosyal Medya"},{value:"Arkadaş Tavsiyesi",label:"Arkadaş Tavsiyesi"},{value:"Diğer",label:"Diğer"}]},{key:"campaign",type:"text",label:"Kampanya",placeholder:"Kampanya adını girin"},{key:"dateRange",type:"dateRange",label:"Bağış Tarihi",placeholder:"Tarih aralığı seçin"},{key:"transactionId",type:"text",label:"İşlem No",placeholder:"İşlem numarasını girin"}],te=[{id:"basic",key:"basic",label:"Temel Filtreler",fields:["search","donorName","donorEmail","status"],operator:"AND"},{id:"platform",key:"platform",label:"Platform ve Ödeme",fields:["platform","paymentMethod","currency"],operator:"AND"},{id:"amount",key:"amount",label:"Tutar ve Amaç",fields:["amountRange","purpose"],operator:"AND"},{id:"recurring",key:"recurring",label:"Düzenli Bağışlar",fields:["isRecurring","recurringPeriod"],operator:"AND"},{id:"marketing",key:"marketing",label:"Pazarlama ve Kampanya",fields:["referralSource","campaign"],operator:"AND"},{id:"date",key:"date",label:"Tarih ve İşlem",fields:["dateRange","transactionId"],operator:"AND"}],le=[{field:"recurringPeriod",dependsOn:"isRecurring",condition:{operator:"equals",value:"true"},action:"show"}],se=[{field:"amountRange",rules:{custom:l=>l&&l.min&&l.max&&l.min>l.max?"Minimum tutar maksimum tutardan büyük olamaz":null}},{field:"dateRange",rules:{custom:l=>l&&l.start&&l.end&&new Date(l.start)>new Date(l.end)?"Başlangıç tarihi bitiş tarihinden sonra olamaz":null}}];function ne(){return{fields:re,groups:te,dependencies:le,validationRules:se}}function ie(){return{baseUrl:"/donations/online",paramPrefix:"f_",excludeFromUrl:["search"],arrayDelimiter:","}}function oe(){return{storageKey:"donations_saved_filters",maxSavedFilters:10,defaultFilters:[]}}function de(){const l=new Date().toISOString();return[{id:"successful",name:"Başarılı Bağışlar",filters:{status:["başarılı"]},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l},{id:"pending",name:"Bekleyen Bağışlar",filters:{status:["beklemede"]},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l},{id:"recurring",name:"Düzenli Bağışlar",filters:{isRecurring:"true"},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l},{id:"high_amount",name:"Yüksek Tutarlı Bağışlar",filters:{amountRange:{min:1e3}},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l},{id:"this_month",name:"Bu Ay",filters:{dateRange:{start:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l},{id:"credit_card",name:"Kredi Kartı Bağışları",filters:{paymentMethod:["Kredi Kartı"]},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l},{id:"mobile_donations",name:"Mobil Bağışlar",filters:{platform:["Mobil Uygulama"]},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l},{id:"social_media",name:"Sosyal Medya Bağışları",filters:{referralSource:["Facebook Ads","Sosyal Medya"]},pageType:"donations",isQuickFilter:!0,createdAt:l,updatedAt:l,usageCount:0,lastUsed:l}]}const ce=[{id:"1",date:"2024-01-15",donorName:"Ahmet Yılmaz",donorEmail:"ahmet.yilmaz@email.com",donorPhone:"+90 532 123 4567",amount:1e3,currency:"TRY",platform:"Website",paymentMethod:"Kredi Kartı",transactionId:"WEB789123456",sessionId:"SES123456789",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",purpose:"Eğitim Yardımı",campaign:"Okul Öncesi Eğitim",referralSource:"Google Ads",isRecurring:!0,recurringPeriod:"Aylık",status:"başarılı",processingFee:30,netAmount:970,notes:"Düzenli bağışçı"},{id:"2",date:"2024-01-14",donorName:"Zeynep Kaya",donorEmail:"zeynep.kaya@email.com",amount:500,currency:"TRY",platform:"Mobile App",paymentMethod:"Dijital Cüzdan",transactionId:"APP456789123",purpose:"Genel Bağış",referralSource:"Sosyal Medya",isRecurring:!1,status:"başarılı",processingFee:15,netAmount:485},{id:"3",date:"2024-01-13",donorName:"Mehmet Demir",donorEmail:"mehmet.demir@email.com",donorPhone:"+90 533 987 6543",amount:250,currency:"TRY",platform:"Facebook",paymentMethod:"Kredi Kartı",transactionId:"FB321654987",purpose:"Kurban",campaign:"Kurban 2024",referralSource:"Facebook",isRecurring:!1,status:"beklemede",processingFee:7.5,netAmount:242.5}],z=["Website","Mobile App","Facebook","Instagram","WhatsApp","SMS"],ue=["Kredi Kartı","Banka Kartı","Dijital Cüzdan","Kripto Para","QR Kod"],Y=["Google Ads","Facebook","Instagram","Twitter","YouTube","E-posta","SMS","Doğrudan","Diğer"];function Ae(){const[l,g]=d.useState(ce),[b,O]=d.useState(""),[L,m]=d.useState(!1),[I,y]=d.useState(!1),[p,h]=d.useState(null),[v,x]=d.useState(!1),[u,f]=d.useState({}),[j,U]=d.useState([]),k=d.useMemo(()=>ne(),[]),N=d.useMemo(()=>ie(),[]),A=d.useMemo(()=>oe(),[]),S=d.useMemo(()=>de(),[]),[s,o]=d.useState({donorName:"",donorEmail:"",donorPhone:"",amount:"",currency:"TRY",platform:"Website",paymentMethod:"Kredi Kartı",transactionId:"",purpose:"",campaign:"",referralSource:"",isRecurring:!1,recurringPeriod:"Aylık",notes:""}),n=d.useMemo(()=>l.filter(a=>{if(b){const r=b.toLowerCase();if(!(a.donorName.toLowerCase().includes(r)||a.donorEmail.toLowerCase().includes(r)||a.transactionId.toLowerCase().includes(r)||a.platform.toLowerCase().includes(r)||a.purpose.toLowerCase().includes(r)))return!1}for(const[r,t]of Object.entries(u))if(!(!t||Array.isArray(t)&&t.length===0))switch(r){case"search":{const i=t.toLowerCase();if(!(a.donorName.toLowerCase().includes(i)||a.donorEmail.toLowerCase().includes(i)||a.transactionId.toLowerCase().includes(i)))return!1;break}case"donorName":if(!a.donorName.toLowerCase().includes(t.toLowerCase()))return!1;break;case"donorEmail":if(!a.donorEmail.toLowerCase().includes(t.toLowerCase()))return!1;break;case"status":if(Array.isArray(t)&&!t.includes(a.status))return!1;break;case"platform":if(Array.isArray(t)&&!t.includes(a.platform))return!1;break;case"paymentMethod":if(Array.isArray(t)&&!t.includes(a.paymentMethod))return!1;break;case"amountRange":if(t.min!==void 0&&a.amount<t.min||t.max!==void 0&&a.amount>t.max)return!1;break;case"currency":if(Array.isArray(t)&&!t.includes(a.currency))return!1;break;case"purpose":if(Array.isArray(t)&&!t.includes(a.purpose))return!1;break;case"isRecurring":{const i=t==="true";if(a.isRecurring!==i)return!1;break}case"recurringPeriod":if(Array.isArray(t)&&a.recurringPeriod&&!t.includes(a.recurringPeriod))return!1;break;case"referralSource":if(Array.isArray(t)&&a.referralSource&&!t.includes(a.referralSource))return!1;break;case"campaign":if(a.campaign&&!a.campaign.toLowerCase().includes(t.toLowerCase()))return!1;break;case"dateRange":{const i=new Date(a.date);if(t.start&&i<new Date(t.start)||t.end&&i>new Date(t.end))return!1;break}case"transactionId":if(!a.transactionId.toLowerCase().includes(t.toLowerCase()))return!1;break}return!0}),[l,b,u]),D=n.reduce((a,r)=>a+r.amount,0),F=n.reduce((a,r)=>a+r.processingFee,0),C=n.filter(a=>a.isRecurring).length,R=d.useMemo(()=>z.map(r=>{const t=n.filter(i=>i.platform===r);return{platform:r,count:t.length,amount:t.reduce((i,c)=>i+c.amount,0)}}).filter(r=>r.count>0),[n]),G=d.useMemo(()=>Y.map(r=>{const t=n.filter(i=>i.referralSource===r);return{source:r,count:t.length,amount:t.reduce((i,c)=>i+c.amount,0)}}).filter(r=>r.count>0),[n]),W=[{key:"date",header:"Tarih"},{key:"transactionId",header:"İşlem No"},{key:"donorName",header:"Bağışçı"},{key:"donorEmail",header:"E-posta"},{key:"platform",header:"Platform",render:(a,r)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.platform==="Website"?"bg-blue-100 text-blue-800":r.platform==="Mobile App"?"bg-green-100 text-green-800":r.platform==="Facebook"?"bg-blue-100 text-blue-800":r.platform==="Instagram"?"bg-pink-100 text-pink-800":r.platform==="WhatsApp"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.platform})},{key:"paymentMethod",header:"Ödeme Yöntemi"},{key:"amount",header:"Tutar",render:(a,r)=>`${r.amount.toLocaleString("tr-TR")} ${r.currency}`},{key:"isRecurring",header:"Düzenli",render:(a,r)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.isRecurring?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.isRecurring?`Evet (${r.recurringPeriod})`:"Hayır"})},{key:"purpose",header:"Amaç"},{key:"campaign",header:"Kampanya"},{key:"status",header:"Durum",render:(a,r)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.status==="başarılı"?"bg-green-100 text-green-800":r.status==="beklemede"?"bg-yellow-100 text-yellow-800":r.status==="başarısız"?"bg-red-100 text-red-800":r.status==="iptal"?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:r.status})},{key:"id",header:"İşlemler",render:(a,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(r),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>Q(r.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],_=a=>{h(a),o({donorName:a.donorName,donorEmail:a.donorEmail,donorPhone:a.donorPhone||"",amount:a.amount.toString(),currency:a.currency,platform:a.platform,paymentMethod:a.paymentMethod,transactionId:a.transactionId,purpose:a.purpose,campaign:a.campaign||"",referralSource:a.referralSource||"",isRecurring:a.isRecurring,recurringPeriod:a.recurringPeriod||"Aylık",notes:a.notes||""}),m(!0)},Q=a=>{confirm("Bu online bağışı silmek istediğinizden emin misiniz?")&&g(l.filter(r=>r.id!==a))},q=a=>{a.preventDefault();const r=parseFloat(s.amount),t=r*.03,i=r-t;if(p)g(l.map(c=>c.id===p.id?{...c,...s,amount:r,processingFee:t,netAmount:i}:c));else{const c={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],...s,donorPhone:s.donorPhone||void 0,amount:r,processingFee:t,netAmount:i,status:"başarılı"};g([...l,c])}m(!1),h(null),T()},T=()=>{o({donorName:"",donorEmail:"",donorPhone:"",amount:"",currency:"TRY",platform:"Website",paymentMethod:"Kredi Kartı",transactionId:"",purpose:"",campaign:"",referralSource:"",isRecurring:!1,recurringPeriod:"Aylık",notes:""})},$=()=>{h(null),T(),m(!0)},M=a=>{f(a),x(!1)},H=()=>{f({}),O("")},B=a=>{const r={...a,id:Date.now().toString(),createdAt:new Date().toISOString()};U(t=>[...t,r])},w=a=>{f(a.filters)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Online Bağışlar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(!0),className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",children:"Analitik"}),e.jsx("button",{onClick:$,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Online Bağış"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Bağış"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Brüt Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[D.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-600",children:"İşlem Ücreti"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[F.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Düzenli Bağış"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:C})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Platform Dağılımı"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:R.map(a=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium",children:a.platform}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.count," bağış"]}),e.jsxs("p",{className:"text-lg font-bold",children:[a.amount.toLocaleString("tr-TR")," ₺"]})]},a.platform))})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>x(!0),className:`flex items-center gap-2 px-4 py-2 rounded border transition-colors ${Object.keys(u).length>0?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(ee,{size:16}),"Gelişmiş Filtre",Object.keys(u).length>0&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:Object.keys(u).length})]}),Object.keys(u).length>0&&e.jsx("button",{onClick:H,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded hover:bg-gray-50",children:"Filtreleri Temizle"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>Z("online-bagislar.csv",n),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center gap-2",children:[e.jsx(P,{size:16}),"CSV İndir"]}),e.jsxs("button",{onClick:()=>J(n,{}),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(ae,{size:16}),"Excel İndir"]}),e.jsxs("button",{onClick:()=>X(n,{}),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-2",children:[e.jsx(P,{size:16}),"PDF İndir"]})]})]}),e.jsx(V,{columns:W,data:n})]}),e.jsx(E,{isOpen:v,onClose:()=>x(!1),onApplyFilters:M,onSaveFilter:B,onLoadFilter:w,fields:k.fields,pageType:"donations",urlConfig:N,savedFiltersConfig:A,quickFilters:S,savedFilters:j,initialFilters:u}),e.jsx(K,{isOpen:L,onClose:()=>m(!1),title:p?"Online Bağış Düzenle":"Yeni Online Bağış",children:e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),e.jsx("input",{type:"text",value:s.donorName,onChange:a=>o({...s,donorName:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),e.jsx("input",{type:"email",value:s.donorEmail,onChange:a=>o({...s,donorEmail:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:s.donorPhone,onChange:a=>o({...s,donorPhone:a.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:a=>o({...s,amount:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:s.currency,onChange:a=>o({...s,currency:a.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Platform"}),e.jsx("select",{value:s.platform,onChange:a=>o({...s,platform:a.target.value}),className:"w-full border rounded px-3 py-2",children:z.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ödeme Yöntemi"}),e.jsx("select",{value:s.paymentMethod,onChange:a=>o({...s,paymentMethod:a.target.value}),className:"w-full border rounded px-3 py-2",children:ue.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İşlem No"}),e.jsx("input",{type:"text",value:s.transactionId,onChange:a=>o({...s,transactionId:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:s.purpose,onChange:a=>o({...s,purpose:a.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kampanya"}),e.jsx("input",{type:"text",value:s.campaign,onChange:a=>o({...s,campaign:a.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Kampanya adı (opsiyonel)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Yönlendirme Kaynağı"}),e.jsxs("select",{value:s.referralSource,onChange:a=>o({...s,referralSource:a.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Seçiniz"}),Y.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.isRecurring,onChange:a=>o({...s,isRecurring:a.target.checked}),className:"mr-2"}),"Düzenli Bağış"]}),s.isRecurring&&e.jsxs("select",{value:s.recurringPeriod,onChange:a=>o({...s,recurringPeriod:a.target.value}),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"Aylık",children:"Aylık"}),e.jsx("option",{value:"Üç Aylık",children:"Üç Aylık"}),e.jsx("option",{value:"Altı Aylık",children:"Altı Aylık"}),e.jsx("option",{value:"Yıllık",children:"Yıllık"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:s.notes,onChange:a=>o({...s,notes:a.target.value}),className:"w-full border rounded px-3 py-2",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"Güncelle":"Kaydet"})]})]})}),e.jsx(K,{isOpen:I,onClose:()=>y(!1),title:"Online Bağış Analitiği",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Platform Performansı"}),e.jsx("div",{className:"space-y-2",children:R.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium",children:a.platform}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[a.count," bağış"]}),e.jsxs("div",{className:"font-bold",children:[a.amount.toLocaleString("tr-TR")," ₺"]})]})]},a.platform))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Yönlendirme Kaynakları"}),e.jsx("div",{className:"space-y-2",children:G.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium",children:a.source}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[a.count," bağış"]}),e.jsxs("div",{className:"font-bold",children:[a.amount.toLocaleString("tr-TR")," ₺"]})]})]},a.source))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Genel İstatistikler"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Ortalama Bağış"}),e.jsxs("div",{className:"text-xl font-bold text-blue-900",children:[n.length>0?(D/n.length).toLocaleString("tr-TR"):"0"," ₺"]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Başarı Oranı"}),e.jsxs("div",{className:"text-xl font-bold text-green-900",children:[n.length>0?Math.round(n.filter(a=>a.status==="başarılı").length/n.length*100):0,"%"]})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded",children:[e.jsx("div",{className:"text-sm text-purple-600",children:"Düzenli Bağış Oranı"}),e.jsxs("div",{className:"text-xl font-bold text-purple-900",children:[n.length>0?Math.round(C/n.length*100):0,"%"]})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded",children:[e.jsx("div",{className:"text-sm text-orange-600",children:"Ortalama İşlem Ücreti"}),e.jsxs("div",{className:"text-xl font-bold text-orange-900",children:[n.length>0?(F/n.length).toLocaleString("tr-TR"):"0"," ₺"]})]})]})]})]})}),e.jsx(E,{isOpen:v,onClose:()=>x(!1),onApplyFilters:M,onSaveFilter:B,onLoadFilter:w,fields:k.fields,pageType:"donations",urlConfig:N,savedFiltersConfig:A,quickFilters:S,savedFilters:j,initialFilters:u})]})}export{Ae as default};
