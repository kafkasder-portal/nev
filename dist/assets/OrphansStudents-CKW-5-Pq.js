import{j as e}from"./query-D2a9LsAW.js";import{r as n}from"./vendor-Ba6jih-_.js";import{D as z}from"./DataTable-Dzg2kqPW.js";import{e as O}from"./exportToCsv-CTUkvpR5.js";import{s as F}from"./index-DdeQrtE8.js";import{S as g}from"./StatCard-R_-DmWX7.js";import{M as v}from"./Modal-BazkrsRl.js";import{U as B,G as A,a as M,D as E,S as _,F as K,ab as Y,aa as q,ao as H,aw as P,ax as G}from"./ui-yrixFDMZ.js";import"./router-PzPojOO1.js";import"./supabase-B5p9Wfie.js";function se(){const[t,s]=n.useState(""),[l,x]=n.useState("all"),[a,c]=n.useState("all"),[i,k]=n.useState(!1),[S,p]=n.useState(!1),[b,w]=n.useState(null),[C,N]=n.useState(!1),o=[],u=n.useMemo(()=>o.filter(r=>{const d=JSON.stringify(r).toLowerCase().includes(t.toLowerCase()),j=l==="all"||r.status===l,y=a==="all"||r.gender===a;return d&&j&&y}),[t,l,a]),h=n.useMemo(()=>{const r=o.length,d=o.filter(m=>m.status==="Aktif").length,j=o.filter(m=>m.status==="Hazırlanıyor").length,y=Math.round(o.reduce((m,T)=>m+T.age,0)/r);return{total:r,active:d,preparing:j,avgAge:y}},[]),D=[{key:"fileNo",header:"Dosya No"},{key:"partner",header:"Partner & Şube"},{key:"nationality",header:"Uyruk"},{key:"country",header:"Ülke"},{key:"gender",header:"Cinsiyet"},{key:"age",header:"Yaş"},{key:"nameTr",header:"İsim (Tercüme)"},{key:"nameOrig",header:"İsim (Orijinal)"},{key:"status",header:"Durum",render:(r,d)=>e.jsx(f,{v:d.status})},{key:"actions",header:"İşlemler",render:(r,d)=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{w(d),N(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Detay Görüntüle",children:e.jsx(H,{size:16})}),e.jsx("button",{className:"rounded p-1 text-green-600 hover:bg-green-50",title:"Düzenle",children:e.jsx(P,{size:16})}),e.jsx("button",{className:"rounded p-1 text-red-600 hover:bg-red-50",title:"Sil",children:e.jsx(G,{size:16})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(g,{title:"Toplam Öğrenci",value:h.total.toString(),icon:e.jsx(B,{className:"h-6 w-6"})}),e.jsx(g,{title:"Aktif Burslar",value:h.active.toString(),icon:e.jsx(A,{className:"h-6 w-6"})}),e.jsx(g,{title:"Hazırlanan",value:h.preparing.toString(),icon:e.jsx(M,{className:"h-6 w-6"})}),e.jsx(g,{title:"Ortalama Yaş",value:h.avgAge.toString(),icon:e.jsx(E,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-3 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(_,{size:16,className:"text-gray-400"}),e.jsx("input",{value:t,onChange:r=>s(r.target.value),className:"min-w-64 flex-1 border-0 outline-none text-sm",placeholder:"Öğrenci adı, dosya no, kimlik no ile arama yapın..."})]}),e.jsxs("button",{onClick:()=>k(!i),className:`flex items-center gap-2 rounded px-3 py-2 text-sm border ${i?"bg-blue-50 border-blue-200 text-blue-700":"hover:bg-gray-50"}`,children:[e.jsx(K,{size:16}),"Filtre"]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[e.jsx(Y,{size:16}),"Yeni Öğrenci"]}),e.jsxs("button",{onClick:()=>O("yetimler.csv",u),className:"flex items-center gap-2 rounded bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700",children:[e.jsx(q,{size:16}),"Dışa Aktar"]})]}),i&&e.jsx("div",{className:"rounded border bg-gray-50 dark:bg-gray-700 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Durum"}),e.jsxs("select",{value:l,onChange:r=>x(r.target.value),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"Aktif",children:"Aktif"}),e.jsx("option",{value:"Hazırlanıyor",children:"Hazırlanıyor"}),e.jsx("option",{value:"Kontrol",children:"Kontrol"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cinsiyet"}),e.jsxs("select",{value:a,onChange:r=>c(r.target.value),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"Kız",children:"Kız"}),e.jsx("option",{value:"Erkek",children:"Erkek"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{x("all"),c("all"),s("")},className:"rounded border px-3 py-2 text-sm hover:bg-white",children:"Filtreleri Temizle"})})]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:[u.length," kayıt gösteriliyor"]}),e.jsxs("span",{children:["Sayfa 1 / ",Math.ceil(u.length/10)]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded border",children:e.jsx(z,{columns:D,data:u})}),e.jsx(v,{isOpen:S,onClose:()=>p(!1),title:"Yeni Öğrenci Ekle",children:e.jsx(U,{onClose:()=>p(!1)})}),e.jsx(v,{isOpen:C,onClose:()=>N(!1),title:"Öğrenci Detayları",children:b&&e.jsx(L,{student:b})})]})}function f({v:t}){const s={Hazırlanıyor:"bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200",Aktif:"bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200",Kontrol:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200",Pasif:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200",Beklemede:"bg-orange-100 dark:bg-orange-800 text-orange-800 dark:text-orange-200"};return e.jsx("span",{className:`rounded px-2 py-0.5 text-xs ${s[t]}`,children:t})}function U({onClose:t}){const[s,l]=n.useState({fileNo:"",partner:"",nationality:"",country:"",gender:"",age:"",nameTr:"",nameOrig:"",status:"Hazırlanıyor"}),x=async a=>{a.preventDefault();try{const{data:c,error:i}=await F.from("students").insert([{file_number:s.fileNo,first_name:s.nameTr,last_name:s.nameOrig,identity_no:s.partner,birth_date:s.nationality,phone:s.country,email:s.gender,address:s.age,school:s.nameTr,grade:s.nameOrig,gpa:parseFloat(s.status)||null,parent_name:s.fileNo,parent_phone:s.partner,monthly_income:parseFloat(s.nationality)||null,status:"active",created_at:new Date().toISOString()}]);if(i){console.error("Student creation error:",i),alert("Öğrenci eklenirken hata oluştu: "+i.message);return}console.log("Yeni ��ğrenci eklendi:",c),alert("Öğrenci başarıyla eklendi"),t()}catch(c){console.error("Student creation error:",c),alert("Öğrenci eklenirken hata oluştu")}};return e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosya No *"}),e.jsx("input",{type:"text",required:!0,value:s.fileNo,onChange:a=>l({...s,fileNo:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: SERBEST-247"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner & Şube"}),e.jsx("input",{type:"text",value:s.partner,onChange:a=>l({...s,partner:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Serbest"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İsim (Tercüme) *"}),e.jsx("input",{type:"text",required:!0,value:s.nameTr,onChange:a=>l({...s,nameTr:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Türkçe isim"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İsim (Orijinal)"}),e.jsx("input",{type:"text",value:s.nameOrig,onChange:a=>l({...s,nameOrig:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Orijinal isim"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uyruk"}),e.jsx("input",{type:"text",value:s.nationality,onChange:a=>l({...s,nationality:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Çeçenistan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ülke"}),e.jsx("input",{type:"text",value:s.country,onChange:a=>l({...s,country:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Türkiye"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cinsiyet *"}),e.jsxs("select",{required:!0,value:s.gender,onChange:a=>l({...s,gender:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Kız",children:"Kız"}),e.jsx("option",{value:"Erkek",children:"Erkek"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yaş *"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"30",value:s.age,onChange:a=>l({...s,age:a.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Yaş"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"rounded bg-green-600 px-4 py-2 text-sm text-white hover:bg-green-700",children:"Kaydet"})]})]})}function L({student:t}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Kişisel Bilgiler"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Dosya No:"}),e.jsx("p",{className:"font-medium",children:t.fileNo})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"İsim (Tercüme):"}),e.jsx("p",{className:"font-medium",children:t.nameTr})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"İsim (Orijinal):"}),e.jsx("p",{className:"font-medium",children:t.nameOrig})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Yaş:"}),e.jsx("p",{className:"font-medium",children:t.age})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Cinsiyet:"}),e.jsx("p",{className:"font-medium",children:t.gender})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Konum Bilgileri"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Uyruk:"}),e.jsx("p",{className:"font-medium",children:t.nationality})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Ülke:"}),e.jsx("p",{className:"font-medium",children:t.country})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Partner & Şube:"}),e.jsx("p",{className:"font-medium",children:t.partner})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Durum:"}),e.jsx(f,{v:t.status})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Burs Bilgileri"}),e.jsx("div",{className:"bg-gray-50 rounded p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Burs Türü:"}),e.jsx("p",{className:"font-medium",children:"Eğitim Bursu"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Aylık Miktar:"}),e.jsx("p",{className:"font-medium",children:"₺2,500"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Başlangıç Tarihi:"}),e.jsx("p",{className:"font-medium",children:"01.09.2024"})]})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Akademik Bilgiler"}),e.jsx("div",{className:"bg-blue-50 rounded p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Okul:"}),e.jsx("p",{className:"font-medium",children:"İstanbul Üniversitesi"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bölüm:"}),e.jsx("p",{className:"font-medium",children:"Bilgisayar Mühendisliği"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Sınıf:"}),e.jsx("p",{className:"font-medium",children:"2. Sınıf"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Not Ortalaması:"}),e.jsx("p",{className:"font-medium",children:"3.45 / 4.00"})]})]})})]})]})}export{se as default};
