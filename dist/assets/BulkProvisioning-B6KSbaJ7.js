import{j as e}from"./query-D2a9LsAW.js";import{r as d}from"./vendor-Ba6jih-_.js";import{D as f}from"./DataTable-Dzg2kqPW.js";import{R as C,B,C as $,X as M,Y as _,T as A,a as z,P as ie,b as oe,c as de}from"./PieChart-B8oIJB3B.js";import{M as T}from"./Modal-BazkrsRl.js";import"./index-DdeQrtE8.js";import"./router-PzPojOO1.js";import"./supabase-B5p9Wfie.js";import"./ui-yrixFDMZ.js";const K=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function me({requests:a}){const s=d.useMemo(()=>{const t=a.length,n=a.filter(c=>["taslak","gönderildi","işlemde"].includes(c.status)).length,l=a.filter(c=>c.approvalStatus==="onaylandı").length,N=a.filter(c=>c.status==="tamamlandı").length,h=a.reduce((c,u)=>c+u.totalAmount,0),j=a.reduce((c,u)=>c+u.paidAmount,0),g=a.reduce((c,u)=>c+u.remainingAmount,0),b=a.reduce((c,u)=>c+u.beneficiaryCount,0),y=t>0?h/t:0,x=h>0?j/h*100:0;return{totalRequests:t,pendingRequests:n,approvedRequests:l,completedRequests:N,totalRequestedAmount:h,totalPaidAmount:j,totalRemainingAmount:g,totalBeneficiaries:b,averageRequestAmount:y,paymentCompletionRate:x}},[a]),r=d.useMemo(()=>{const t=a.reduce((n,l)=>(n[l.department]=(n[l.department]||0)+l.totalAmount,n),{});return Object.entries(t).map(([n,l])=>({name:n,value:l}))},[a]),i=d.useMemo(()=>{const t=a.reduce((n,l)=>(n[l.priority]=(n[l.priority]||0)+1,n),{});return Object.entries(t).map(([n,l])=>({name:n,value:l}))},[a]),m=d.useMemo(()=>{const t=a.reduce((n,l)=>(n[l.status]=(n[l.status]||0)+1,n),{});return Object.entries(t).map(([n,l])=>({name:n,value:l}))},[a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Talep"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.totalRequests}),e.jsxs("p",{className:"text-xs text-blue-600",children:["Beklemede: ",s.pendingRequests]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Toplam Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[s.totalRequestedAmount.toLocaleString("tr-TR")," ₺"]}),e.jsxs("p",{className:"text-xs text-green-600",children:["Ort: ",s.averageRequestAmount.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-600",children:"Ödeme Durumu"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:["%",s.paymentCompletionRate.toFixed(1)]}),e.jsxs("p",{className:"text-xs text-yellow-600",children:["Ödenen: ",s.totalPaidAmount.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Faydalanıcı"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:s.totalBeneficiaries}),e.jsxs("p",{className:"text-xs text-purple-600",children:["Onaylanan: ",s.approvedRequests]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Departmana Göre Analiz"}),e.jsx(C,{width:"100%",height:300,children:e.jsxs(B,{data:r,children:[e.jsx($,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),e.jsx(_,{tickFormatter:t=>`${(t/1e3).toFixed(0)}K`,fontSize:12}),e.jsx(A,{formatter:t=>[`${Number(t).toLocaleString("tr-TR")} ₺`,"Tutar"]}),e.jsx(z,{dataKey:"value",fill:"#3B82F6"})]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Öncelik Dağılımı"}),e.jsx(C,{width:"100%",height:300,children:e.jsxs(ie,{children:[e.jsx(oe,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:n})=>`${t} (${(n?n*100:0).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:i.map((t,n)=>e.jsx(de,{fill:K[n%K.length]},`cell-${n}`))}),e.jsx(A,{})]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border col-span-2",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Durum Analizi"}),e.jsx(C,{width:"100%",height:300,children:e.jsxs(B,{data:m,children:[e.jsx($,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",fontSize:12}),e.jsx(_,{fontSize:12}),e.jsx(A,{}),e.jsx(z,{dataKey:"value",fill:"#10B981"})]})})]})]})]})}function ce({query:a,setQuery:s,statusFilter:r,setStatusFilter:i,priorityFilter:m,setPriorityFilter:t,departmentFilter:n,setDepartmentFilter:l,approvalFilter:N,setApprovalFilter:h,paymentFilter:j,setPaymentFilter:g,dateFilter:b,setDateFilter:y}){return e.jsxs("div",{className:"bg-white p-4 rounded-lg border mb-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Arama"}),e.jsx("input",{type:"text",value:a,onChange:x=>s(x.target.value),placeholder:"Talep no, kişi, amaç...",className:"w-full border rounded px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Durum"}),e.jsxs("select",{value:r,onChange:x=>i(x.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"taslak",children:"Taslak"}),e.jsx("option",{value:"gönderildi",children:"Gönderildi"}),e.jsx("option",{value:"işlemde",children:"İşlemde"}),e.jsx("option",{value:"tamamlandı",children:"Tamamlandı"}),e.jsx("option",{value:"iptal",children:"İptal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),e.jsxs("select",{value:m,onChange:x=>t(x.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"düşük",children:"Düşük"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"yüksek",children:"Yüksek"}),e.jsx("option",{value:"acil",children:"Acil"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departman"}),e.jsx("input",{type:"text",value:n,onChange:x=>l(x.target.value),placeholder:"Departman adı...",className:"w-full border rounded px-3 py-2 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Durumu"}),e.jsxs("select",{value:N,onChange:x=>h(x.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"reddedildi",children:"Reddedildi"}),e.jsx("option",{value:"revizyon",children:"Revizyon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ödeme Durumu"}),e.jsxs("select",{value:j,onChange:x=>g(x.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"kısmi",children:"Kısmi"}),e.jsx("option",{value:"tamamlandı",children:"Tamamlandı"}),e.jsx("option",{value:"iptal",children:"İptal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tarih Filtresi"}),e.jsx("input",{type:"date",value:b,onChange:x=>y(x.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]})]})]})}function xe({onEdit:a,onViewItems:s,onViewPayments:r,onApproval:i}){return[{key:"requestNumber",header:"Talep No"},{key:"requestDate",header:"Tarih",render:(m,t)=>new Date(t.requestDate).toLocaleDateString("tr-TR")},{key:"requestedBy",header:"Talep Eden"},{key:"department",header:"Departman"},{key:"priority",header:"Öncelik",render:(m,t)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.priority==="acil"?"bg-red-100 text-red-800":t.priority==="yüksek"?"bg-orange-100 text-orange-800":t.priority==="normal"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:t.priority})},{key:"totalAmount",header:"Tutar/Faydalanıcı",render:(m,t)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium",children:[t.totalAmount.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{className:"text-gray-500",children:[t.beneficiaryCount," kişi"]})]})},{key:"purpose",header:"Amaç"},{key:"targetDate",header:"Hedef Tarih",render:(m,t)=>new Date(t.targetDate).toLocaleDateString("tr-TR")},{key:"approvalStatus",header:"Onay Durumu",render:(m,t)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.approvalStatus==="onaylandı"?"bg-green-100 text-green-800":t.approvalStatus==="beklemede"?"bg-yellow-100 text-yellow-800":t.approvalStatus==="reddedildi"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t.approvalStatus})},{key:"paymentStatus",header:"Ödeme Durumu",render:(m,t)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.paymentStatus==="tamamlandı"?"bg-green-100 text-green-800":t.paymentStatus==="kısmi"?"bg-yellow-100 text-yellow-800":t.paymentStatus==="beklemede"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:t.paymentStatus}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.paidAmount.toLocaleString("tr-TR")," / ",t.totalAmount.toLocaleString("tr-TR")," ₺"]})]})},{key:"status",header:"Durum",render:(m,t)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="tamamlandı"?"bg-green-100 text-green-800":t.status==="işlemde"?"bg-blue-100 text-blue-800":t.status==="gönderildi"?"bg-yellow-100 text-yellow-800":t.status==="taslak"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:t.status})},{key:"id",header:"İşlemler",render:(m,t)=>e.jsxs("div",{className:"flex gap-1 text-xs",children:[a&&e.jsx("button",{onClick:()=>a(t),className:"text-blue-600 hover:text-blue-800 px-2 py-1 rounded",children:"Düzenle"}),e.jsx("button",{onClick:()=>s(t),className:"text-green-600 hover:text-green-800 px-2 py-1 rounded",children:"Kalemler"}),e.jsx("button",{onClick:()=>r(t),className:"text-purple-600 hover:text-purple-800 px-2 py-1 rounded",children:"Ödemeler"}),t.approvalStatus==="beklemede"&&e.jsx("button",{onClick:()=>i(t),className:"text-orange-600 hover:text-orange-800 px-2 py-1 rounded",children:"Onayla"})]})}]}function I(a){return[{key:"requestId",header:"Talep No",render:(s,r)=>{const i=a.find(m=>m.id===r.requestId);return i?i.requestNumber:"Bilinmiyor"}},{key:"itemType",header:"Tip",render:(s,r)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.itemType==="nakit"?"bg-green-100 text-green-800":r.itemType==="gıda"?"bg-blue-100 text-blue-800":r.itemType==="giyim"?"bg-purple-100 text-purple-800":r.itemType==="barınma"?"bg-orange-100 text-orange-800":r.itemType==="sağlık"?"bg-red-100 text-red-800":r.itemType==="eğitim"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:r.itemType})},{key:"itemName",header:"Kalem Adı"},{key:"description",header:"Açıklama"},{key:"quantity",header:"Miktar/Birim",render:(s,r)=>`${r.quantity} ${r.unit}`},{key:"unitPrice",header:"Birim/Toplam",render:(s,r)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[r.unitPrice.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{className:"text-gray-500 font-medium",children:[r.totalPrice.toLocaleString("tr-TR")," ₺"]})]})},{key:"supplier",header:"Tedarikçi"},{key:"deliveryDate",header:"Teslimat",render:(s,r)=>r.deliveryDate?new Date(r.deliveryDate).toLocaleDateString("tr-TR"):"-"},{key:"status",header:"Durum",render:(s,r)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.status==="teslim-edildi"?"bg-green-100 text-green-800":r.status==="sipariş-verildi"?"bg-blue-100 text-blue-800":r.status==="onaylandı"?"bg-yellow-100 text-yellow-800":r.status==="beklemede"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:r.status})}]}function Y(a){return[{key:"requestId",header:"Talep No",render:(s,r)=>{const i=a.find(m=>m.id===r.requestId);return i?i.requestNumber:"Bilinmiyor"}},{key:"paymentDate",header:"Ödeme Tarihi",render:(s,r)=>new Date(r.paymentDate).toLocaleDateString("tr-TR")},{key:"amount",header:"Tutar",render:(s,r)=>`${r.amount.toLocaleString("tr-TR")} ${r.currency}`},{key:"paymentMethod",header:"Ödeme Yöntemi",render:(s,r)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.paymentMethod==="nakit"?"bg-green-100 text-green-800":r.paymentMethod==="banka"?"bg-blue-100 text-blue-800":r.paymentMethod==="kredi-kartı"?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"}`,children:r.paymentMethod})},{key:"referenceNumber",header:"Referans No"},{key:"paidBy",header:"Ödeyen"},{key:"receivedBy",header:"Alan"},{key:"receiptNumber",header:"Makbuz No"},{key:"status",header:"Durum",render:(s,r)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.status==="tamamlandı"?"bg-green-100 text-green-800":r.status==="beklemede"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:r.status})}]}function ue({selectedRequest:a,items:s,payments:r,requests:i,isItemsModalOpen:m,setIsItemsModalOpen:t,isPaymentsModalOpen:n,setIsPaymentsModalOpen:l,isApprovalModalOpen:N,setIsApprovalModalOpen:h,isAddModalOpen:j,setIsAddModalOpen:g,onApprovalSubmit:b}){const y=I(i),x=Y(i),c=u=>{u.preventDefault();const p=new FormData(u.currentTarget),v={status:p.get("status"),notes:p.get("notes")};b==null||b(v),h(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{isOpen:m,onClose:()=>t(!1),title:`Kalemler - ${a==null?void 0:a.requestNumber}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Talep Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:["Amaç: ",a==null?void 0:a.purpose]}),e.jsxs("div",{children:["Toplam Tutar: ",a==null?void 0:a.totalAmount.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{children:["Faydalanıcı: ",a==null?void 0:a.beneficiaryCount," kişi"]}),e.jsxs("div",{children:["Hedef Tarih: ",a==null?void 0:a.targetDate]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx(f,{columns:y,data:s.filter(u=>u.requestId===(a==null?void 0:a.id))})})]})}),e.jsx(T,{isOpen:n,onClose:()=>l(!1),title:`Ödemeler - ${a==null?void 0:a.requestNumber}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Ödeme Özeti"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Toplam Tutar:"}),e.jsxs("div",{className:"font-medium",children:[a==null?void 0:a.totalAmount.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Ödenen:"}),e.jsxs("div",{className:"font-medium text-green-600",children:[a==null?void 0:a.paidAmount.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Kalan:"}),e.jsxs("div",{className:"font-medium text-orange-600",children:[a==null?void 0:a.remainingAmount.toLocaleString("tr-TR")," ₺"]})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx(f,{columns:x,data:r.filter(u=>u.requestId===(a==null?void 0:a.id))})})]})}),e.jsx(T,{isOpen:N,onClose:()=>h(!1),title:`Talep Onayı - ${a==null?void 0:a.requestNumber}`,children:e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Talep Detayları"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:["Talep Eden: ",a==null?void 0:a.requestedBy]}),e.jsxs("div",{children:["Departman: ",a==null?void 0:a.department]}),e.jsxs("div",{children:["Amaç: ",a==null?void 0:a.purpose]}),e.jsxs("div",{children:["Tutar: ",a==null?void 0:a.totalAmount.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{children:["Faydalanıcı: ",a==null?void 0:a.beneficiaryCount," kişi"]}),e.jsxs("div",{children:["Hedef Tarih: ",a==null?void 0:a.targetDate]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Açıklama:"}),e.jsx("p",{className:"text-sm mt-1",children:a==null?void 0:a.description})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Durumu"}),e.jsxs("select",{name:"status",className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"onaylandı",children:"Onayla"}),e.jsx("option",{value:"reddedildi",children:"Reddet"}),e.jsx("option",{value:"revizyon",children:"Revizyon İste"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Notları"}),e.jsx("textarea",{name:"notes",className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Onay/ret gerekçesi...",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Kaydet"})]})]})}),e.jsx(T,{isOpen:j,onClose:()=>g(!1),title:"Yeni Provizyon Talebi",children:e.jsxs("form",{onSubmit:async u=>{u.preventDefault();const p=new FormData(u.currentTarget),v={title:p.get("title"),description:p.get("description"),priority:p.get("priority")||"normal",type:p.get("type"),amount:p.get("amount"),status:"pending",created_at:new Date().toISOString()};try{console.log("Yeni talep eklendi:",v),alert("Talep başarıyla eklendi!"),g(!1)}catch(D){console.error("Talep eklenirken hata:",D),alert("Talep eklenirken hata oluştu!")}},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Talep Başlığı"}),e.jsx("input",{type:"text",name:"title",className:"w-full border rounded px-3 py-2",placeholder:"Talep başlığını girin...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departman"}),e.jsxs("select",{name:"department",className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Departman seçin..."}),e.jsx("option",{value:"IT",children:"IT"}),e.jsx("option",{value:"İnsan Kaynakları",children:"İnsan Kaynakları"}),e.jsx("option",{value:"Muhasebe",children:"Muhasebe"}),e.jsx("option",{value:"Satış",children:"Satış"}),e.jsx("option",{value:"Pazarlama",children:"Pazarlama"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),e.jsxs("select",{name:"priority",className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Öncelik seçin..."}),e.jsx("option",{value:"Düşük",children:"Düşük"}),e.jsx("option",{value:"Orta",children:"Orta"}),e.jsx("option",{value:"Yüksek",children:"Yüksek"}),e.jsx("option",{value:"Acil",children:"Acil"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama"}),e.jsx("textarea",{name:"description",className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Talep açıklaması...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bütçe (TL)"}),e.jsx("input",{type:"number",name:"budget",className:"w-full border rounded px-3 py-2",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Talep Oluştur"})]})]})})]})}function ke(){const[a]=d.useState([]),[s]=d.useState([]),[r]=d.useState([]),[i,m]=d.useState(""),[t,n]=d.useState(""),[l,N]=d.useState(""),[h,j]=d.useState(""),[g,b]=d.useState(""),[y,x]=d.useState(""),[c,u]=d.useState(""),[p,v]=d.useState("requests"),[D,F]=d.useState(!1),[Q,O]=d.useState(!1),[E,S]=d.useState(!1),[V,L]=d.useState(!1),[G,k]=d.useState(null),P=d.useMemo(()=>a.filter(o=>{const w=JSON.stringify(o).toLowerCase().includes(i.toLowerCase()),ae=!t||o.status===t,te=!l||o.priority===l,re=!h||o.department.toLowerCase().includes(h.toLowerCase()),ne=!g||o.approvalStatus===g,se=!y||o.paymentStatus===y,le=!c||o.requestDate.includes(c);return w&&ae&&te&&re&&ne&&se&&le}),[a,i,t,l,h,g,y,c]),H=d.useMemo(()=>s.filter(o=>JSON.stringify(o).toLowerCase().includes(i.toLowerCase())),[s,i]),J=d.useMemo(()=>r.filter(o=>JSON.stringify(o).toLowerCase().includes(i.toLowerCase())),[r,i]),X=o=>{k(o),F(!0)},U=o=>{k(o),O(!0)},W=o=>{k(o),S(!0)},Z=o=>{console.log("Approval data:",o),S(!1),k(null)},R=xe({onViewItems:X,onViewPayments:U,onApproval:W}),q=I(a),ee=Y(a);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Toplu Provizyon Alma"}),e.jsxs("div",{className:"flex border rounded",children:[e.jsx("button",{onClick:()=>v("requests"),className:`px-4 py-2 text-sm ${p==="requests"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Talepler"}),e.jsx("button",{onClick:()=>v("items"),className:`px-4 py-2 text-sm ${p==="items"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Kalemler"}),e.jsx("button",{onClick:()=>v("payments"),className:`px-4 py-2 text-sm ${p==="payments"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Ödemeler"}),e.jsx("button",{onClick:()=>v("analytics"),className:`px-4 py-2 text-sm ${p==="analytics"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Analitik"})]})]}),p==="requests"&&e.jsx("button",{onClick:()=>L(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Talep"})]}),p==="requests"&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{query:i,setQuery:m,statusFilter:t,setStatusFilter:n,priorityFilter:l,setPriorityFilter:N,departmentFilter:h,setDepartmentFilter:j,approvalFilter:g,setApprovalFilter:b,paymentFilter:y,setPaymentFilter:x,dateFilter:c,setDateFilter:u}),e.jsx(f,{columns:R,data:P})]}),p==="items"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{value:i,onChange:o=>m(o.target.value),className:"border rounded px-3 py-2 w-full max-w-md",placeholder:"Kalem adı, tedarikçi ile ara..."})}),e.jsx(f,{columns:q,data:H})]}),p==="payments"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{value:i,onChange:o=>m(o.target.value),className:"border rounded px-3 py-2 w-full max-w-md",placeholder:"Referans no, ödeyen kişi ile ara..."})}),e.jsx(f,{columns:ee,data:J})]}),p==="analytics"&&e.jsx(me,{requests:P})]}),e.jsx(ue,{selectedRequest:G,items:s,payments:r,requests:a,isItemsModalOpen:D,setIsItemsModalOpen:F,isPaymentsModalOpen:Q,setIsPaymentsModalOpen:O,isApprovalModalOpen:E,setIsApprovalModalOpen:S,isAddModalOpen:V,setIsAddModalOpen:L,onApprovalSubmit:Z})]})}export{ke as default};
