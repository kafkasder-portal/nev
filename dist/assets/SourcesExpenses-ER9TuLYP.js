import{j as e}from"./query-D2a9LsAW.js";import{r as t}from"./vendor-Ba6jih-_.js";import{D as v}from"./DataTable-Dzg2kqPW.js";import{e as w}from"./exportToCsv-CTUkvpR5.js";import{ab as K,T as x,aw as B,ax as S}from"./ui-yrixFDMZ.js";import{R as u,B as T,C,X as F,Y as M,T as p,a as h,P as z,b as E,c as A}from"./PieChart-B8oIJB3B.js";import"./index-DdeQrtE8.js";import"./router-PzPojOO1.js";import"./supabase-B5p9Wfie.js";const D=[{id:"1",name:"Kurumsal Bağış - ABC Şirketi",code:"SRC-001",type:"Kaynak",category:"Kurumsal Bağış",amount:5e4,date:"2024-01-15",description:"ABC Şirketi kurumsal bağışı",fund:"Genel Fon",status:"Onaylandı",responsible:"Ahmet Yılmaz"},{id:"2",name:"Gıda Paketi Alımı",code:"EXP-001",type:"Harcama",category:"Gıda Malzemesi",amount:-15e3,date:"2024-01-14",description:"Aylık gıda paketi malzeme alımı",fund:"Yardım Fonu",status:"Onaylandı",responsible:"Fatma Demir"},{id:"3",name:"Bireysel Bağışlar",code:"SRC-002",type:"Kaynak",category:"Bireysel Bağış",amount:25e3,date:"2024-01-13",description:"Çeşitli bireysel bağışların toplamı",fund:"Genel Fon",status:"Onaylandı",responsible:"Mehmet Öz"},{id:"4",name:"Eğitim Materyali",code:"EXP-002",type:"Harcama",category:"Eğitim Malzemesi",amount:-8e3,date:"2024-01-12",description:"Öğrenci kırtasiye ve kitap alımı",fund:"Eğitim Fonu",status:"Beklemede",responsible:"Ayşe Kaya"}],H=[{name:"Kurumsal Bağış",kaynak:5e4,harcama:0},{name:"Bireysel Bağış",kaynak:25e3,harcama:0},{name:"Gıda Malzemesi",kaynak:0,harcama:15e3},{name:"Eğitim Malzemesi",kaynak:0,harcama:8e3}],y=[{name:"Kurumsal Bağış",value:5e4,color:"#0088FE"},{name:"Bireysel Bağış",value:25e3,color:"#00C49F"},{name:"Gıda Malzemesi",value:15e3,color:"#FFBB28"},{name:"Eğitim Malzemesi",value:8e3,color:"#FF8042"}];function V(){const[r,j]=t.useState(""),[b,c]=t.useState(!1),[n,g]=t.useState("all"),[d,f]=t.useState("all"),l=t.useMemo(()=>{let a=D;return n!=="all"&&(a=a.filter(s=>s.type===n)),d!=="all"&&(a=a.filter(s=>s.status===d)),r&&(a=a.filter(s=>JSON.stringify(s).toLowerCase().includes(r.toLowerCase()))),a},[r,n,d]),i=t.useMemo(()=>l.filter(a=>a.type==="Kaynak").reduce((a,s)=>a+s.amount,0),[l]),o=t.useMemo(()=>Math.abs(l.filter(a=>a.type==="Harcama").reduce((a,s)=>a+s.amount,0)),[l]),k=[{key:"code",header:"Kod"},{key:"name",header:"Açıklama"},{key:"type",header:"Tip",render:a=>{const s=String(a||"");return e.jsxs("span",{className:`flex items-center gap-1 rounded-full px-2 py-1 text-xs ${s==="Kaynak"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[s==="Kaynak"?e.jsx(x,{className:"h-3 w-3"}):e.jsx(x,{className:"h-3 w-3"}),s]})}},{key:"category",header:"Kategori"},{key:"amount",header:"Tutar (TL)",render:a=>{const s=Number(a)||0;return e.jsxs("span",{className:s>0?"text-green-600 font-medium":"text-red-600 font-medium",children:["₺",Math.abs(s).toLocaleString()]})}},{key:"fund",header:"Fon"},{key:"date",header:"Tarih"},{key:"status",header:"Durum",render:a=>{const s={Onaylandı:"bg-green-100 text-green-700",Beklemede:"bg-yellow-100 text-yellow-700",İptal:"bg-red-100 text-red-700"},m=String(a||""),N=m;return e.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${s[N]||s.Beklemede}`,children:m})}},{key:"responsible",header:"Sorumlu"},{key:"actions",header:"İşlemler",render:()=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{className:"rounded p-1 text-red-600 hover:bg-red-50",title:"Sil",children:e.jsx(S,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-2",children:[e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-1 text-sm text-white",children:[e.jsx(K,{className:"h-4 w-4"}),"Yeni Kayıt"]}),e.jsxs("select",{value:n,onChange:a=>g(a.target.value),className:"rounded border bg-background px-2 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Tipler"}),e.jsx("option",{value:"Kaynak",children:"Kaynak"}),e.jsx("option",{value:"Harcama",children:"Harcama"})]}),e.jsxs("select",{value:d,onChange:a=>f(a.target.value),className:"rounded border bg-background px-2 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"Onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"Beklemede",children:"Beklemede"}),e.jsx("option",{value:"İptal",children:"İptal"})]}),e.jsx("input",{value:r,onChange:a=>j(a.target.value),className:"min-w-64 flex-1 rounded border px-2 py-1 text-sm",placeholder:"Kaynak/Harcama ara..."}),e.jsx("button",{className:"rounded bg-blue-600 px-3 py-1 text-sm text-white",children:"Ara"}),e.jsx("button",{className:"rounded border px-3 py-1 text-sm",children:"Filtre"}),e.jsx("button",{onClick:()=>w("kaynak-harcama.csv",l),className:"rounded bg-gray-600 px-3 py-1 text-sm text-white",children:"İndir"}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[l.length," Kayıt"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Kaynak"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₺",i.toLocaleString()]})]}),e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Harcama"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["₺",o.toLocaleString()]})]}),e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Net Bakiye"}),e.jsxs("p",{className:`text-2xl font-bold ${i-o>0?"text-green-600":"text-red-600"}`,children:["₺",(i-o).toLocaleString()]})]}),e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Bekleyen İşlem"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.filter(a=>a.status==="Beklemede").length})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded border bg-card p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Kaynak vs Harcama"}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex h-[300px] items-center justify-center",children:"Grafik yükleniyor..."}),children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(T,{data:H,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name"}),e.jsx(M,{}),e.jsx(p,{}),e.jsx(h,{dataKey:"kaynak",fill:"#22c55e",name:"Kaynak"}),e.jsx(h,{dataKey:"harcama",fill:"#ef4444",name:"Harcama"})]})})})]}),e.jsxs("div",{className:"rounded border bg-card p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Kategori Dağılımı"}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex h-[300px] items-center justify-center",children:"Grafik yükleniyor..."}),children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(z,{children:[e.jsx(E,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:s})=>`${a} ${((s||0)*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:y.map((a,s)=>e.jsx(A,{fill:a.color},`cell-${s}`))}),e.jsx(p,{})]})})})]})]}),e.jsx(v,{columns:k,data:l}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-lg rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"Yeni Kaynak/Harcama Ekle"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Kod"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tip"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"Kaynak",children:"Kaynak"}),e.jsx("option",{value:"Harcama",children:"Harcama"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Açıklama"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Kategori"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{children:"Seçiniz..."}),e.jsx("option",{children:"Kurumsal Bağış"}),e.jsx("option",{children:"Bireysel Bağış"}),e.jsx("option",{children:"Gıda Malzemesi"}),e.jsx("option",{children:"Eğitim Malzemesi"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Fon"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{children:"Seçiniz..."}),e.jsx("option",{children:"Genel Fon"}),e.jsx("option",{children:"Yardım Fonu"}),e.jsx("option",{children:"Eğitim Fonu"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tutar (TL)"}),e.jsx("input",{type:"number",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tarih"}),e.jsx("input",{type:"date",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Sorumlu Kişi"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Detay Açıklama"}),e.jsx("textarea",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",rows:3})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 rounded border px-4 py-2 text-sm",children:"İptal"}),e.jsx("button",{type:"submit",className:"flex-1 rounded bg-green-600 px-4 py-2 text-sm text-white",children:"Kaydet"})]})]})]})})]})}export{V as default};
